<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<!-- Generated by HsColour, http://code.haskell.org/~malcolm/hscolour/ -->
<title>dist/build/OpenCV/ImgProc/ImgFiltering.hs</title>
<link type='text/css' rel='stylesheet' href='hscolour.css' />
</head>
<body>
<pre><a name="line-1"></a><span class='hs-comment'>{-# LINE 1 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-2"></a><span class='hs-comment'>{-# language CPP #-}</span>
<a name="line-3"></a><span class='hs-comment'>{-# LINE 2 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-4"></a><span class='hs-comment'>{-# language QuasiQuotes #-}</span>
<a name="line-5"></a><span class='hs-comment'>{-# language TemplateHaskell #-}</span>
<a name="line-6"></a>
<a name="line-7"></a>
<a name="line-8"></a><span class='hs-comment'>{-# LINE 8 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-9"></a>
<a name="line-10"></a><span class='hs-comment'>{- |
<a name="line-11"></a>
<a name="line-12"></a>Functions and classes described in this section are used to perform various
<a name="line-13"></a>linear or non-linear filtering operations on 2D images (represented as
<a name="line-14"></a>@'Mat'@\'s). It means that for each pixel location @(x,y)@ in the source image
<a name="line-15"></a>(normally, rectangular), its neighborhood is considered and used to compute the
<a name="line-16"></a>response. In case of a linear filter, it is a weighted sum of pixel values. In
<a name="line-17"></a>case of morphological operations, it is the minimum or maximum values, and so
<a name="line-18"></a>on. The computed response is stored in the destination image at the same
<a name="line-19"></a>location @(x,y)@. It means that the output image will be of the same size as the
<a name="line-20"></a>input image. Normally, the functions support multi-channel arrays, in which case
<a name="line-21"></a>every channel is processed independently. Therefore, the output image will also
<a name="line-22"></a>have the same number of channels as the input one.
<a name="line-23"></a>
<a name="line-24"></a>Another common feature of the functions and classes described in this section is
<a name="line-25"></a>that, unlike simple arithmetic functions, they need to extrapolate values of
<a name="line-26"></a>some non-existing pixels. For example, if you want to smooth an image using a
<a name="line-27"></a>Gaussian @3x3@ filter, then, when processing the left-most pixels in each
<a name="line-28"></a>row, you need pixels to the left of them, that is, outside of the image. You can
<a name="line-29"></a>let these pixels be the same as the left-most image pixels ("replicated border"
<a name="line-30"></a>extrapolation method), or assume that all the non-existing pixels are zeros
<a name="line-31"></a>("constant border" extrapolation method), and so on. OpenCV enables you to
<a name="line-32"></a>specify the extrapolation method.
<a name="line-33"></a>-}</span>
<a name="line-34"></a><span class='hs-keyword'>module</span> <span class='hs-conid'>OpenCV</span><span class='hs-varop'>.</span><span class='hs-conid'>ImgProc</span><span class='hs-varop'>.</span><span class='hs-conid'>ImgFiltering</span>
<a name="line-35"></a>    <span class='hs-layout'>(</span> <span class='hs-conid'>MorphShape</span><span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span>
<a name="line-36"></a>    <span class='hs-layout'>,</span> <span class='hs-conid'>MorphOperation</span><span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span>
<a name="line-37"></a>
<a name="line-38"></a>    <span class='hs-layout'>,</span> <span class='hs-varid'>laplacian</span>
<a name="line-39"></a>    <span class='hs-layout'>,</span> <span class='hs-varid'>medianBlur</span>
<a name="line-40"></a>    <span class='hs-layout'>,</span> <span class='hs-varid'>erode</span>
<a name="line-41"></a>    <span class='hs-layout'>,</span> <span class='hs-varid'>dilate</span>
<a name="line-42"></a>    <span class='hs-layout'>,</span> <span class='hs-varid'>filter2D</span>
<a name="line-43"></a>    <span class='hs-layout'>,</span> <span class='hs-varid'>morphologyEx</span>
<a name="line-44"></a>    <span class='hs-layout'>,</span> <span class='hs-varid'>getStructuringElement</span>
<a name="line-45"></a>    <span class='hs-layout'>,</span> <span class='hs-varid'>blur</span>
<a name="line-46"></a>    <span class='hs-layout'>,</span> <span class='hs-varid'>gaussianBlur</span>
<a name="line-47"></a>    <span class='hs-layout'>)</span> <span class='hs-keyword'>where</span>
<a name="line-48"></a>
<a name="line-49"></a><span class='hs-keyword'>import</span> <span class='hs-str'>"base"</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>Int</span>
<a name="line-50"></a><span class='hs-keyword'>import</span> <span class='hs-str'>"base"</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>Maybe</span>
<a name="line-51"></a><span class='hs-keyword'>import</span> <span class='hs-str'>"base"</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>Proxy</span>
<a name="line-52"></a><span class='hs-keyword'>import</span> <span class='hs-str'>"base"</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>Word</span>
<a name="line-53"></a><span class='hs-keyword'>import</span> <span class='hs-keyword'>qualified</span> <span class='hs-str'>"inline-c"</span> <span class='hs-conid'>Language</span><span class='hs-varop'>.</span><span class='hs-conid'>C</span><span class='hs-varop'>.</span><span class='hs-conid'>Inline</span> <span class='hs-keyword'>as</span> <span class='hs-conid'>C</span>
<a name="line-54"></a><span class='hs-keyword'>import</span> <span class='hs-keyword'>qualified</span> <span class='hs-str'>"inline-c-cpp"</span> <span class='hs-conid'>Language</span><span class='hs-varop'>.</span><span class='hs-conid'>C</span><span class='hs-varop'>.</span><span class='hs-conid'>Inline</span><span class='hs-varop'>.</span><span class='hs-conid'>Cpp</span> <span class='hs-keyword'>as</span> <span class='hs-conid'>C</span>
<a name="line-55"></a><span class='hs-keyword'>import</span> <span class='hs-str'>"linear"</span> <span class='hs-conid'>Linear</span><span class='hs-varop'>.</span><span class='hs-conid'>V2</span> <span class='hs-layout'>(</span> <span class='hs-conid'>V2</span><span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span> <span class='hs-layout'>)</span>
<a name="line-56"></a><span class='hs-keyword'>import</span> <span class='hs-str'>"this"</span> <span class='hs-conid'>OpenCV</span><span class='hs-varop'>.</span><span class='hs-conid'>Core</span><span class='hs-varop'>.</span><span class='hs-conid'>Types</span>
<a name="line-57"></a><span class='hs-keyword'>import</span> <span class='hs-str'>"this"</span> <span class='hs-conid'>OpenCV</span><span class='hs-varop'>.</span><span class='hs-conid'>ImgProc</span><span class='hs-varop'>.</span><span class='hs-conid'>Types</span>
<a name="line-58"></a><span class='hs-keyword'>import</span> <span class='hs-str'>"this"</span> <span class='hs-conid'>OpenCV</span><span class='hs-varop'>.</span><span class='hs-conid'>Internal</span><span class='hs-varop'>.</span><span class='hs-conid'>C</span><span class='hs-varop'>.</span><span class='hs-conid'>Inline</span> <span class='hs-layout'>(</span> <span class='hs-varid'>openCvCtx</span> <span class='hs-layout'>)</span>
<a name="line-59"></a><span class='hs-keyword'>import</span> <span class='hs-str'>"this"</span> <span class='hs-conid'>OpenCV</span><span class='hs-varop'>.</span><span class='hs-conid'>Internal</span><span class='hs-varop'>.</span><span class='hs-conid'>C</span><span class='hs-varop'>.</span><span class='hs-conid'>Types</span>
<a name="line-60"></a><span class='hs-keyword'>import</span> <span class='hs-str'>"this"</span> <span class='hs-conid'>OpenCV</span><span class='hs-varop'>.</span><span class='hs-conid'>Internal</span><span class='hs-varop'>.</span><span class='hs-conid'>Core</span><span class='hs-varop'>.</span><span class='hs-conid'>Types</span><span class='hs-varop'>.</span><span class='hs-conid'>Mat</span>
<a name="line-61"></a><span class='hs-keyword'>import</span> <span class='hs-str'>"this"</span> <span class='hs-conid'>OpenCV</span><span class='hs-varop'>.</span><span class='hs-conid'>Internal</span><span class='hs-varop'>.</span><span class='hs-conid'>Exception</span>
<a name="line-62"></a><span class='hs-keyword'>import</span> <span class='hs-str'>"this"</span> <span class='hs-conid'>OpenCV</span><span class='hs-varop'>.</span><span class='hs-conid'>Internal</span><span class='hs-varop'>.</span><span class='hs-conid'>ImgProc</span><span class='hs-varop'>.</span><span class='hs-conid'>Types</span> <span class='hs-layout'>(</span> <span class='hs-varid'>marshalBorderMode</span> <span class='hs-layout'>)</span>
<a name="line-63"></a><span class='hs-keyword'>import</span> <span class='hs-str'>"this"</span> <span class='hs-conid'>OpenCV</span><span class='hs-varop'>.</span><span class='hs-conid'>TypeLevel</span>
<a name="line-64"></a>
<a name="line-65"></a><span class='hs-comment'>--------------------------------------------------------------------------------</span>
<a name="line-66"></a>
<a name="line-67"></a><span class='hs-conid'>C</span><span class='hs-varop'>.</span><span class='hs-varid'>context</span> <span class='hs-varid'>openCvCtx</span>
<a name="line-68"></a>
<a name="line-69"></a><span class='hs-conid'>C</span><span class='hs-varop'>.</span><span class='hs-varid'>include</span> <span class='hs-str'>"opencv2/core.hpp"</span>
<a name="line-70"></a><span class='hs-conid'>C</span><span class='hs-varop'>.</span><span class='hs-varid'>include</span> <span class='hs-str'>"opencv2/imgproc.hpp"</span>
<a name="line-71"></a><span class='hs-conid'>C</span><span class='hs-varop'>.</span><span class='hs-varid'>using</span> <span class='hs-str'>"namespace cv"</span>
<a name="line-72"></a>
<a name="line-73"></a>
<a name="line-74"></a><span class='hs-comment'>{-# LINE 73 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-75"></a>
<a name="line-76"></a><span class='hs-comment'>{-# LINE 74 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-77"></a>
<a name="line-78"></a><span class='hs-comment'>{-# LINE 75 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-79"></a>
<a name="line-80"></a>
<a name="line-81"></a><span class='hs-comment'>{-# LINE 77 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-82"></a>
<a name="line-83"></a><span class='hs-comment'>{-# LINE 78 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-84"></a>
<a name="line-85"></a>
<a name="line-86"></a><span class='hs-comment'>--------------------------------------------------------------------------------</span>
<a name="line-87"></a><span class='hs-comment'>-- Constants</span>
<a name="line-88"></a><span class='hs-comment'>--------------------------------------------------------------------------------</span>
<a name="line-89"></a>
<a name="line-90"></a><a name="defaultAnchor"></a><span class='hs-definition'>defaultAnchor</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Point2i</span>
<a name="line-91"></a><span class='hs-definition'>defaultAnchor</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>toPoint</span> <span class='hs-layout'>(</span><span class='hs-varid'>pure</span> <span class='hs-layout'>(</span><span class='hs-comment'>-</span><span class='hs-num'>1</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>V2</span> <span class='hs-conid'>Int32</span><span class='hs-layout'>)</span>
<a name="line-92"></a>
<a name="line-93"></a>
<a name="line-94"></a><span class='hs-comment'>--------------------------------------------------------------------------------</span>
<a name="line-95"></a><span class='hs-comment'>-- Types</span>
<a name="line-96"></a><span class='hs-comment'>--------------------------------------------------------------------------------</span>
<a name="line-97"></a>
<a name="line-98"></a><a name="MorphShape"></a><span class='hs-keyword'>data</span> <span class='hs-conid'>MorphShape</span>
<a name="line-99"></a>   <span class='hs-keyglyph'>=</span> <span class='hs-conid'>MorphRect</span> <span class='hs-comment'>-- ^ A rectangular structuring element.</span>
<a name="line-100"></a>   <span class='hs-keyglyph'>|</span> <span class='hs-conid'>MorphEllipse</span>
<a name="line-101"></a>     <span class='hs-comment'>-- ^ An elliptic structuring element, that is, a filled ellipse inscribed</span>
<a name="line-102"></a>     <span class='hs-comment'>-- into the rectangle Rect(0, 0, esize.width, 0.esize.height).</span>
<a name="line-103"></a>   <span class='hs-keyglyph'>|</span> <span class='hs-conid'>MorphCross</span> <span class='hs-varop'>!</span><span class='hs-conid'>Point2i</span> <span class='hs-comment'>-- ^ A cross-shaped structuring element.</span>
<a name="line-104"></a>
<a name="line-105"></a><a name="c'MORPH_RECT"></a><span class='hs-definition'>c'MORPH_RECT</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>0</span>
<a name="line-106"></a><span class='hs-definition'>c'MORPH_RECT</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>a</span>
<a name="line-107"></a>
<a name="line-108"></a><a name="c'MORPH_ELLIPSE"></a><span class='hs-comment'>{-# LINE 100 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-109"></a><span class='hs-definition'>c'MORPH_ELLIPSE</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>2</span>
<a name="line-110"></a><span class='hs-definition'>c'MORPH_ELLIPSE</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>a</span>
<a name="line-111"></a>
<a name="line-112"></a><a name="c'MORPH_CROSS"></a><span class='hs-comment'>{-# LINE 101 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-113"></a><span class='hs-definition'>c'MORPH_CROSS</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>1</span>
<a name="line-114"></a><span class='hs-definition'>c'MORPH_CROSS</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>a</span>
<a name="line-115"></a>
<a name="line-116"></a><span class='hs-comment'>{-# LINE 102 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-117"></a>
<a name="line-118"></a><a name="marshalMorphShape"></a><span class='hs-definition'>marshalMorphShape</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>MorphShape</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-layout'>(</span><span class='hs-conid'>Int32</span><span class='hs-layout'>,</span> <span class='hs-conid'>Point2i</span><span class='hs-layout'>)</span>
<a name="line-119"></a><span class='hs-definition'>marshalMorphShape</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyglyph'>\</span><span class='hs-keyword'>case</span>
<a name="line-120"></a>    <span class='hs-conid'>MorphRect</span>         <span class='hs-keyglyph'>-&gt;</span> <span class='hs-layout'>(</span><span class='hs-varid'>c'MORPH_RECT</span>   <span class='hs-layout'>,</span> <span class='hs-varid'>defaultAnchor</span><span class='hs-layout'>)</span>
<a name="line-121"></a>    <span class='hs-conid'>MorphEllipse</span>      <span class='hs-keyglyph'>-&gt;</span> <span class='hs-layout'>(</span><span class='hs-varid'>c'MORPH_ELLIPSE</span><span class='hs-layout'>,</span> <span class='hs-varid'>defaultAnchor</span><span class='hs-layout'>)</span>
<a name="line-122"></a>    <span class='hs-conid'>MorphCross</span> <span class='hs-varid'>anchor</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-layout'>(</span><span class='hs-varid'>c'MORPH_CROSS</span>  <span class='hs-layout'>,</span> <span class='hs-varid'>anchor</span><span class='hs-layout'>)</span>
<a name="line-123"></a>
<a name="line-124"></a><a name="MorphOperation"></a><span class='hs-keyword'>data</span> <span class='hs-conid'>MorphOperation</span>
<a name="line-125"></a>   <span class='hs-keyglyph'>=</span> <span class='hs-conid'>MorphOpen</span>     <span class='hs-comment'>-- ^ An opening operation: dilate . erode</span>
<a name="line-126"></a>   <span class='hs-keyglyph'>|</span> <span class='hs-conid'>MorphClose</span>    <span class='hs-comment'>-- ^ A closing operation: erode . dilate</span>
<a name="line-127"></a>   <span class='hs-keyglyph'>|</span> <span class='hs-conid'>MorphGradient</span> <span class='hs-comment'>-- ^ A morphological gradient: dilate - erode</span>
<a name="line-128"></a>   <span class='hs-keyglyph'>|</span> <span class='hs-conid'>MorphTopHat</span>   <span class='hs-comment'>-- ^ "top hat": src - open</span>
<a name="line-129"></a>   <span class='hs-keyglyph'>|</span> <span class='hs-conid'>MorphBlackHat</span> <span class='hs-comment'>-- ^ "black hat": close - src</span>
<a name="line-130"></a>
<a name="line-131"></a><a name="c'MORPH_OPEN"></a><span class='hs-definition'>c'MORPH_OPEN</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>2</span>
<a name="line-132"></a><span class='hs-definition'>c'MORPH_OPEN</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>a</span>
<a name="line-133"></a>
<a name="line-134"></a><a name="c'MORPH_CLOSE"></a><span class='hs-comment'>{-# LINE 117 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-135"></a><span class='hs-definition'>c'MORPH_CLOSE</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>3</span>
<a name="line-136"></a><span class='hs-definition'>c'MORPH_CLOSE</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>a</span>
<a name="line-137"></a>
<a name="line-138"></a><a name="c'MORPH_GRADIENT"></a><span class='hs-comment'>{-# LINE 118 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-139"></a><span class='hs-definition'>c'MORPH_GRADIENT</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>4</span>
<a name="line-140"></a><span class='hs-definition'>c'MORPH_GRADIENT</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>a</span>
<a name="line-141"></a>
<a name="line-142"></a><a name="c'MORPH_TOPHAT"></a><span class='hs-comment'>{-# LINE 119 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-143"></a><span class='hs-definition'>c'MORPH_TOPHAT</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>5</span>
<a name="line-144"></a><span class='hs-definition'>c'MORPH_TOPHAT</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>a</span>
<a name="line-145"></a>
<a name="line-146"></a><a name="c'MORPH_BLACKHAT"></a><span class='hs-comment'>{-# LINE 120 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-147"></a><span class='hs-definition'>c'MORPH_BLACKHAT</span> <span class='hs-keyglyph'>=</span> <span class='hs-num'>6</span>
<a name="line-148"></a><span class='hs-definition'>c'MORPH_BLACKHAT</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Num</span> <span class='hs-varid'>a</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>a</span>
<a name="line-149"></a>
<a name="line-150"></a><span class='hs-comment'>{-# LINE 121 "src/OpenCV/ImgProc/ImgFiltering.hsc" #-}</span>
<a name="line-151"></a>
<a name="line-152"></a><a name="marshalMorphOperation"></a><span class='hs-definition'>marshalMorphOperation</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>MorphOperation</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Int32</span>
<a name="line-153"></a><span class='hs-definition'>marshalMorphOperation</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyglyph'>\</span><span class='hs-keyword'>case</span>
<a name="line-154"></a>    <span class='hs-conid'>MorphOpen</span>     <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>c'MORPH_OPEN</span>
<a name="line-155"></a>    <span class='hs-conid'>MorphClose</span>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>c'MORPH_CLOSE</span>
<a name="line-156"></a>    <span class='hs-conid'>MorphGradient</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>c'MORPH_GRADIENT</span>
<a name="line-157"></a>    <span class='hs-conid'>MorphTopHat</span>   <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>c'MORPH_TOPHAT</span>
<a name="line-158"></a>    <span class='hs-conid'>MorphBlackHat</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>c'MORPH_BLACKHAT</span>
<a name="line-159"></a>
<a name="line-160"></a>
<a name="line-161"></a><span class='hs-comment'>--------------------------------------------------------------------------------</span>
<a name="line-162"></a><span class='hs-comment'>-- Image Filtering</span>
<a name="line-163"></a><span class='hs-comment'>--------------------------------------------------------------------------------</span>
<a name="line-164"></a>
<a name="line-165"></a><a name="laplacian"></a><span class='hs-comment'>{- | Calculates the Laplacian of an image
<a name="line-166"></a>
<a name="line-167"></a>The function calculates the Laplacian of the source image by adding up
<a name="line-168"></a>the second x and y derivatives calculated using the Sobel operator.
<a name="line-169"></a>
<a name="line-170"></a>Example:
<a name="line-171"></a>
<a name="line-172"></a>@
<a name="line-173"></a>laplacianImg
<a name="line-174"></a>    :: forall shape channels depth
<a name="line-175"></a>     . (Mat shape channels depth ~ Birds_512x341)
<a name="line-176"></a>    =&gt; Mat shape ('S 1) ('S Double)
<a name="line-177"></a>laplacianImg = exceptError $ do
<a name="line-178"></a>    imgG &lt;- cvtColor bgr gray birds_512x341
<a name="line-179"></a>    laplacian Nothing Nothing Nothing Nothing imgG
<a name="line-180"></a>@
<a name="line-181"></a>
<a name="line-182"></a>&lt;&lt;doc/generated/examples/laplacianImg.png laplacianImg&gt;&gt;
<a name="line-183"></a>
<a name="line-184"></a>&lt;<a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#laplacian">http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#laplacian</a> OpenCV Sphinx doc&gt;
<a name="line-185"></a>-}</span>
<a name="line-186"></a><span class='hs-definition'>laplacian</span>
<a name="line-187"></a>    <span class='hs-keyglyph'>::</span> <span class='hs-keyword'>forall</span> <span class='hs-varid'>shape</span> <span class='hs-varid'>channels</span> <span class='hs-varid'>srcDepth</span> <span class='hs-varid'>dstDepth</span>
<a name="line-188"></a>     <span class='hs-varop'>.</span> <span class='hs-layout'>(</span><span class='hs-conid'>ToDepth</span> <span class='hs-layout'>(</span><span class='hs-conid'>Proxy</span> <span class='hs-varid'>dstDepth</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-189"></a>    <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Maybe</span> <span class='hs-conid'>Int32</span>
<a name="line-190"></a>       <span class='hs-comment'>-- ^ Aperture size used to compute the second-derivative filters. The</span>
<a name="line-191"></a>       <span class='hs-comment'>-- size must be positive and odd. Default value is 1.</span>
<a name="line-192"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Maybe</span> <span class='hs-conid'>Double</span>
<a name="line-193"></a>       <span class='hs-comment'>-- ^ Optional scale factor for the computed Laplacian values. Default</span>
<a name="line-194"></a>       <span class='hs-comment'>-- value is 1.</span>
<a name="line-195"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Maybe</span> <span class='hs-conid'>Double</span>
<a name="line-196"></a>       <span class='hs-comment'>-- ^ Optional delta value that is added to the results. Default value is</span>
<a name="line-197"></a>       <span class='hs-comment'>-- 0.</span>
<a name="line-198"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Maybe</span> <span class='hs-conid'>BorderMode</span>
<a name="line-199"></a>       <span class='hs-comment'>-- ^ Pixel extrapolation method.</span>
<a name="line-200"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-varid'>channels</span> <span class='hs-varid'>srcDepth</span>
<a name="line-201"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>CvExcept</span> <span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-varid'>channels</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>dstDepth</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-202"></a><span class='hs-definition'>laplacian</span> <span class='hs-varid'>ksize</span> <span class='hs-varid'>scale</span> <span class='hs-varid'>delta</span> <span class='hs-varid'>borderType</span> <span class='hs-varid'>src</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>unsafeWrapException</span> <span class='hs-varop'>$</span> <span class='hs-keyword'>do</span>
<a name="line-203"></a>    <span class='hs-varid'>dst</span> <span class='hs-keyglyph'>&lt;-</span> <span class='hs-varid'>newEmptyMat</span>
<a name="line-204"></a>    <span class='hs-varid'>handleCvException</span> <span class='hs-layout'>(</span><span class='hs-varid'>pure</span> <span class='hs-varop'>$</span> <span class='hs-varid'>unsafeCoerceMat</span> <span class='hs-varid'>dst</span><span class='hs-layout'>)</span> <span class='hs-varop'>$</span>
<a name="line-205"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>src</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>srcPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-206"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>dst</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>dstPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-207"></a>      <span class='hs-keyglyph'>[</span><span class='hs-varid'>cvExcept</span><span class='hs-keyglyph'>|</span>
<a name="line-208"></a>        <span class='hs-varid'>cv</span><span class='hs-keyglyph'>::</span><span class='hs-conid'>Laplacian</span>
<a name="line-209"></a>        <span class='hs-layout'>(</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varop'>*</span>   <span class='hs-varid'>srcPtr</span>      <span class='hs-layout'>)</span>
<a name="line-210"></a>        <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varop'>*</span>   <span class='hs-varid'>dstPtr</span>      <span class='hs-layout'>)</span>
<a name="line-211"></a>        <span class='hs-layout'>,</span>  <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>int32_t</span> <span class='hs-varid'>c'ddepth</span>    <span class='hs-layout'>)</span>
<a name="line-212"></a>        <span class='hs-layout'>,</span>  <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>int32_t</span> <span class='hs-varid'>c'ksize</span>     <span class='hs-layout'>)</span>
<a name="line-213"></a>        <span class='hs-layout'>,</span>  <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>double</span>  <span class='hs-varid'>c'scale</span>     <span class='hs-layout'>)</span>
<a name="line-214"></a>        <span class='hs-layout'>,</span>  <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>double</span>  <span class='hs-varid'>c'delta</span>     <span class='hs-layout'>)</span>
<a name="line-215"></a>        <span class='hs-layout'>,</span>  <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>int32_t</span> <span class='hs-varid'>c'borderType</span><span class='hs-layout'>)</span>
<a name="line-216"></a>        <span class='hs-layout'>)</span><span class='hs-layout'>;</span>
<a name="line-217"></a>      <span class='hs-keyglyph'>|</span><span class='hs-keyglyph'>]</span>
<a name="line-218"></a>  <span class='hs-keyword'>where</span>
<a name="line-219"></a>    <span class='hs-varid'>c'ksize</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fromMaybe</span> <span class='hs-num'>1</span> <span class='hs-varid'>ksize</span>
<a name="line-220"></a>    <span class='hs-varid'>c'scale</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>maybe</span> <span class='hs-num'>1</span> <span class='hs-varid'>realToFrac</span> <span class='hs-varid'>scale</span>
<a name="line-221"></a>    <span class='hs-varid'>c'delta</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>maybe</span> <span class='hs-num'>0</span> <span class='hs-varid'>realToFrac</span> <span class='hs-varid'>delta</span>
<a name="line-222"></a>    <span class='hs-varid'>c'ddepth</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>marshalDepth</span> <span class='hs-varop'>$</span> <span class='hs-varid'>toDepth</span> <span class='hs-layout'>(</span><span class='hs-conid'>Proxy</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Proxy</span> <span class='hs-varid'>dstDepth</span><span class='hs-layout'>)</span>
<a name="line-223"></a>    <span class='hs-varid'>c'borderType</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fst</span> <span class='hs-varop'>$</span> <span class='hs-varid'>marshalBorderMode</span> <span class='hs-varop'>$</span> <span class='hs-varid'>fromMaybe</span> <span class='hs-conid'>BorderReflect101</span> <span class='hs-varid'>borderType</span>
<a name="line-224"></a>
<a name="line-225"></a><a name="medianBlur"></a><span class='hs-comment'>{- | Blurs an image using the median filter
<a name="line-226"></a>
<a name="line-227"></a>Example:
<a name="line-228"></a>
<a name="line-229"></a>@
<a name="line-230"></a>medianBlurImg
<a name="line-231"></a>    :: forall (width    :: Nat)
<a name="line-232"></a>              (width2   :: Nat)
<a name="line-233"></a>              (height   :: Nat)
<a name="line-234"></a>              (channels :: Nat)
<a name="line-235"></a>              (depth    :: *)
<a name="line-236"></a>     . ( Mat (ShapeT [height, width]) ('S channels) ('S depth) ~ Birds_512x341
<a name="line-237"></a>       , width2 ~ ((*) width 2) -- TODO (RvD): HSE parse error with infix type operator
<a name="line-238"></a>       )
<a name="line-239"></a>    =&gt; Mat (ShapeT [height, width2]) ('S channels) ('S depth)
<a name="line-240"></a>medianBlurImg = exceptError $
<a name="line-241"></a>    withMatM (Proxy :: Proxy [height, width2])
<a name="line-242"></a>             (Proxy :: Proxy channels)
<a name="line-243"></a>             (Proxy :: Proxy depth)
<a name="line-244"></a>             white $ \imgM -&gt; do
<a name="line-245"></a>      birdsBlurred &lt;- pureExcept $ medianBlur birds_512x341 13
<a name="line-246"></a>      matCopyToM imgM (V2 0 0) birds_512x341 Nothing
<a name="line-247"></a>      matCopyToM imgM (V2 w 0) birdsBlurred  Nothing
<a name="line-248"></a>  where
<a name="line-249"></a>    w = fromInteger $ natVal (Proxy :: Proxy width)
<a name="line-250"></a>@
<a name="line-251"></a>
<a name="line-252"></a>&lt;&lt;doc/generated/examples/medianBlurImg.png medianBlurImg&gt;&gt;
<a name="line-253"></a>
<a name="line-254"></a>&lt;<a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#medianblur">http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#medianblur</a> OpenCV Sphinx doc&gt;
<a name="line-255"></a>-}</span>
<a name="line-256"></a><span class='hs-comment'>-- TODO (Rvd): make ksize a type level argument</span>
<a name="line-257"></a><span class='hs-comment'>-- if ksize in [3, 5] then depth in [Word8, Int16, Float) else depth ~ Word8</span>
<a name="line-258"></a><span class='hs-definition'>medianBlur</span>
<a name="line-259"></a>    <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span> <span class='hs-varid'>depth</span>    <span class='hs-varop'>`In`</span> <span class='hs-chr'>'</span><span class='hs-keyglyph'>[</span><span class='hs-conid'>Word8</span><span class='hs-layout'>,</span> <span class='hs-conid'>Word16</span><span class='hs-layout'>,</span> <span class='hs-conid'>Float</span><span class='hs-keyglyph'>]</span>
<a name="line-260"></a>       <span class='hs-layout'>,</span> <span class='hs-varid'>channels</span> <span class='hs-varop'>`In`</span> <span class='hs-chr'>'</span><span class='hs-keyglyph'>[</span><span class='hs-num'>1</span><span class='hs-layout'>,</span> <span class='hs-num'>3</span><span class='hs-layout'>,</span> <span class='hs-num'>4</span><span class='hs-keyglyph'>]</span>
<a name="line-261"></a>       <span class='hs-comment'>-- , Length shape &lt;= 2</span>
<a name="line-262"></a>       <span class='hs-layout'>)</span>
<a name="line-263"></a>    <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>channels</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>depth</span><span class='hs-layout'>)</span>
<a name="line-264"></a>       <span class='hs-comment'>-- ^ Input 1-, 3-, or 4-channel image; when ksize is 3 or 5, the image</span>
<a name="line-265"></a>       <span class='hs-comment'>-- depth should be 'Word8', 'Word16', or 'Float', for</span>
<a name="line-266"></a>       <span class='hs-comment'>-- larger aperture sizes, it can only be 'Word8'.</span>
<a name="line-267"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Int32</span>
<a name="line-268"></a>       <span class='hs-comment'>-- ^ Aperture linear size; it must be odd and greater than 1, for</span>
<a name="line-269"></a>       <span class='hs-comment'>-- example: 3, 5, 7...</span>
<a name="line-270"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>CvExcept</span> <span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>channels</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>depth</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-271"></a><span class='hs-definition'>medianBlur</span> <span class='hs-varid'>matIn</span> <span class='hs-varid'>ksize</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>unsafeWrapException</span> <span class='hs-varop'>$</span> <span class='hs-keyword'>do</span>
<a name="line-272"></a>    <span class='hs-varid'>matOut</span> <span class='hs-keyglyph'>&lt;-</span> <span class='hs-varid'>newEmptyMat</span>
<a name="line-273"></a>    <span class='hs-varid'>handleCvException</span> <span class='hs-layout'>(</span><span class='hs-varid'>pure</span> <span class='hs-varop'>$</span> <span class='hs-varid'>unsafeCoerceMat</span> <span class='hs-varid'>matOut</span><span class='hs-layout'>)</span> <span class='hs-varop'>$</span>
<a name="line-274"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>matOut</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>matOutPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-275"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>matIn</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>matInPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-276"></a>        <span class='hs-keyglyph'>[</span><span class='hs-varid'>cvExcept</span><span class='hs-keyglyph'>|</span> <span class='hs-varid'>cv</span><span class='hs-keyglyph'>::</span><span class='hs-varid'>medianBlur</span><span class='hs-layout'>(</span><span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varop'>*</span> <span class='hs-varid'>matInPtr</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varop'>*</span> <span class='hs-varid'>matOutPtr</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span> <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>int32_t</span> <span class='hs-varid'>ksize</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span><span class='hs-layout'>;</span> <span class='hs-keyglyph'>|</span><span class='hs-keyglyph'>]</span>
<a name="line-277"></a>
<a name="line-278"></a><a name="blur"></a><span class='hs-comment'>{- | Blurs an image using a box filter.
<a name="line-279"></a>
<a name="line-280"></a>Example:
<a name="line-281"></a>
<a name="line-282"></a>@
<a name="line-283"></a>boxBlurImg
<a name="line-284"></a>    :: forall (width    :: Nat)
<a name="line-285"></a>              (width2   :: Nat)
<a name="line-286"></a>              (height   :: Nat)
<a name="line-287"></a>              (channels :: Nat)
<a name="line-288"></a>              (depth    :: *)
<a name="line-289"></a>     . ( Mat (ShapeT [height, width]) ('S channels) ('S depth) ~ Birds_512x341
<a name="line-290"></a>       , width2 ~ ((*) width 2) -- TODO (RvD): HSE parse error with infix type operator
<a name="line-291"></a>       )
<a name="line-292"></a>    =&gt; Mat (ShapeT [height, width2]) ('S channels) ('S depth)
<a name="line-293"></a>boxBlurImg = exceptError $
<a name="line-294"></a>    withMatM (Proxy :: Proxy [height, width2])
<a name="line-295"></a>             (Proxy :: Proxy channels)
<a name="line-296"></a>             (Proxy :: Proxy depth)
<a name="line-297"></a>             white $ \imgM -&gt; do
<a name="line-298"></a>      birdsBlurred &lt;- pureExcept $ blur (V2 13 13 :: V2 Int32) birds_512x341
<a name="line-299"></a>      matCopyToM imgM (V2 0 0) birds_512x341 Nothing
<a name="line-300"></a>      matCopyToM imgM (V2 w 0) birdsBlurred  Nothing
<a name="line-301"></a>  where
<a name="line-302"></a>    w = fromInteger $ natVal (Proxy :: Proxy width)
<a name="line-303"></a>@
<a name="line-304"></a>
<a name="line-305"></a>&lt;&lt;doc/generated/examples/boxBlurImg.png boxBlurImg&gt;&gt;
<a name="line-306"></a>
<a name="line-307"></a>&lt;<a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#blur">http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#blur</a> OpenCV Sphinx doc&gt;
<a name="line-308"></a>-}</span>
<a name="line-309"></a><span class='hs-definition'>blur</span>
<a name="line-310"></a>  <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span> <span class='hs-varid'>depth</span> <span class='hs-varop'>`In`</span> <span class='hs-chr'>'</span><span class='hs-keyglyph'>[</span><span class='hs-conid'>Word8</span><span class='hs-layout'>,</span> <span class='hs-conid'>Word16</span><span class='hs-layout'>,</span> <span class='hs-conid'>Int16</span><span class='hs-layout'>,</span> <span class='hs-conid'>Float</span><span class='hs-layout'>,</span> <span class='hs-conid'>Double</span><span class='hs-keyglyph'>]</span>
<a name="line-311"></a>     <span class='hs-layout'>,</span> <span class='hs-conid'>IsSize</span>  <span class='hs-varid'>size</span>  <span class='hs-conid'>Int32</span>
<a name="line-312"></a>     <span class='hs-layout'>)</span>
<a name="line-313"></a>  <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>size</span>  <span class='hs-conid'>Int32</span> <span class='hs-comment'>-- ^ Blurring kernel size.</span>
<a name="line-314"></a>  <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>channels</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>depth</span><span class='hs-layout'>)</span>
<a name="line-315"></a>  <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>CvExcept</span> <span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>channels</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>depth</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-316"></a><span class='hs-definition'>blur</span> <span class='hs-varid'>size</span> <span class='hs-varid'>matIn</span> <span class='hs-keyglyph'>=</span>
<a name="line-317"></a>  <span class='hs-varid'>unsafeWrapException</span> <span class='hs-varop'>$</span>
<a name="line-318"></a>  <span class='hs-keyword'>do</span> <span class='hs-varid'>matOut</span> <span class='hs-keyglyph'>&lt;-</span> <span class='hs-varid'>newEmptyMat</span>
<a name="line-319"></a>     <span class='hs-varid'>handleCvException</span> <span class='hs-layout'>(</span><span class='hs-varid'>pure</span> <span class='hs-varop'>$</span> <span class='hs-varid'>unsafeCoerceMat</span> <span class='hs-varid'>matOut</span><span class='hs-layout'>)</span> <span class='hs-varop'>$</span>
<a name="line-320"></a>       <span class='hs-varid'>withPtr</span> <span class='hs-varid'>ksize</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>ksizePtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-321"></a>       <span class='hs-varid'>withPtr</span> <span class='hs-varid'>matIn</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>matInPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-322"></a>       <span class='hs-varid'>withPtr</span> <span class='hs-varid'>matOut</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>matOutPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-323"></a>       <span class='hs-keyglyph'>[</span><span class='hs-varid'>cvExcept</span><span class='hs-keyglyph'>|</span>
<a name="line-324"></a>           <span class='hs-varid'>cv</span><span class='hs-keyglyph'>::</span><span class='hs-varid'>blur</span>
<a name="line-325"></a>           <span class='hs-layout'>(</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varop'>*</span> <span class='hs-varid'>matInPtr</span><span class='hs-layout'>)</span>
<a name="line-326"></a>           <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varop'>*</span> <span class='hs-varid'>matOutPtr</span><span class='hs-layout'>)</span>
<a name="line-327"></a>           <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Size2i</span> <span class='hs-varop'>*</span> <span class='hs-varid'>ksizePtr</span><span class='hs-layout'>)</span>
<a name="line-328"></a>           <span class='hs-layout'>)</span><span class='hs-layout'>;</span>
<a name="line-329"></a>       <span class='hs-keyglyph'>|</span><span class='hs-keyglyph'>]</span>
<a name="line-330"></a>  <span class='hs-keyword'>where</span> <span class='hs-varid'>ksize</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Size2i</span>
<a name="line-331"></a>        <span class='hs-varid'>ksize</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>toSize</span> <span class='hs-varid'>size</span>
<a name="line-332"></a>
<a name="line-333"></a><a name="gaussianBlur"></a><span class='hs-definition'>gaussianBlur</span>
<a name="line-334"></a>  <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span> <span class='hs-varid'>depth</span> <span class='hs-varop'>`In`</span> <span class='hs-chr'>'</span><span class='hs-keyglyph'>[</span><span class='hs-conid'>Word8</span><span class='hs-layout'>,</span> <span class='hs-conid'>Word16</span><span class='hs-layout'>,</span> <span class='hs-conid'>Float</span><span class='hs-layout'>,</span> <span class='hs-conid'>Double</span><span class='hs-keyglyph'>]</span>
<a name="line-335"></a>     <span class='hs-layout'>,</span> <span class='hs-conid'>IsSize</span> <span class='hs-varid'>size</span> <span class='hs-conid'>Int32</span>
<a name="line-336"></a>     <span class='hs-layout'>)</span>
<a name="line-337"></a>  <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>size</span> <span class='hs-conid'>Int32</span> <span class='hs-comment'>-- ^ Blurring kernel size.</span>
<a name="line-338"></a>  <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Double</span> <span class='hs-comment'>-- ^ sigmaX</span>
<a name="line-339"></a>  <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Double</span> <span class='hs-comment'>-- ^ sigmaY</span>
<a name="line-340"></a>  <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>channels</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>depth</span><span class='hs-layout'>)</span>
<a name="line-341"></a>  <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>CvExcept</span> <span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>channels</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>depth</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-342"></a><span class='hs-definition'>gaussianBlur</span> <span class='hs-varid'>size</span> <span class='hs-varid'>sigmaX</span> <span class='hs-varid'>sigmaY</span> <span class='hs-varid'>matIn</span> <span class='hs-keyglyph'>=</span>
<a name="line-343"></a>  <span class='hs-varid'>unsafeWrapException</span> <span class='hs-varop'>$</span>
<a name="line-344"></a>  <span class='hs-keyword'>do</span> <span class='hs-varid'>matOut</span> <span class='hs-keyglyph'>&lt;-</span> <span class='hs-varid'>newEmptyMat</span>
<a name="line-345"></a>     <span class='hs-varid'>handleCvException</span> <span class='hs-layout'>(</span><span class='hs-varid'>pure</span> <span class='hs-varop'>$</span> <span class='hs-varid'>unsafeCoerceMat</span> <span class='hs-varid'>matOut</span><span class='hs-layout'>)</span> <span class='hs-varop'>$</span>
<a name="line-346"></a>       <span class='hs-varid'>withPtr</span> <span class='hs-varid'>ksize</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>ksizePtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-347"></a>       <span class='hs-varid'>withPtr</span> <span class='hs-varid'>matIn</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>matInPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-348"></a>       <span class='hs-varid'>withPtr</span> <span class='hs-varid'>matOut</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>matOutPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-349"></a>       <span class='hs-keyglyph'>[</span><span class='hs-varid'>cvExcept</span><span class='hs-keyglyph'>|</span>
<a name="line-350"></a>           <span class='hs-varid'>cv</span><span class='hs-keyglyph'>::</span><span class='hs-conid'>GaussianBlur</span>
<a name="line-351"></a>           <span class='hs-layout'>(</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varop'>*</span> <span class='hs-varid'>matInPtr</span><span class='hs-layout'>)</span>
<a name="line-352"></a>           <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varop'>*</span> <span class='hs-varid'>matOutPtr</span><span class='hs-layout'>)</span>
<a name="line-353"></a>           <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Size2i</span> <span class='hs-varop'>*</span> <span class='hs-varid'>ksizePtr</span><span class='hs-layout'>)</span>
<a name="line-354"></a>           <span class='hs-layout'>,</span> <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>double</span> <span class='hs-varid'>c'sigmaX</span><span class='hs-layout'>)</span>
<a name="line-355"></a>           <span class='hs-layout'>,</span> <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>double</span> <span class='hs-varid'>c'sigmaY</span><span class='hs-layout'>)</span>
<a name="line-356"></a>           <span class='hs-layout'>)</span><span class='hs-layout'>;</span>
<a name="line-357"></a>       <span class='hs-keyglyph'>|</span><span class='hs-keyglyph'>]</span>
<a name="line-358"></a>  <span class='hs-keyword'>where</span>
<a name="line-359"></a>    <span class='hs-varid'>ksize</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Size2i</span>
<a name="line-360"></a>    <span class='hs-varid'>ksize</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>toSize</span> <span class='hs-varid'>size</span>
<a name="line-361"></a>
<a name="line-362"></a>    <span class='hs-varid'>c'sigmaX</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>realToFrac</span> <span class='hs-varid'>sigmaX</span>
<a name="line-363"></a>    <span class='hs-varid'>c'sigmaY</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>realToFrac</span> <span class='hs-varid'>sigmaY</span>
<a name="line-364"></a>
<a name="line-365"></a><a name="erode"></a><span class='hs-comment'>{- | Erodes an image by using a specific structuring element
<a name="line-366"></a>
<a name="line-367"></a>Example:
<a name="line-368"></a>
<a name="line-369"></a>@
<a name="line-370"></a>erodeImg
<a name="line-371"></a>    :: forall (width    :: Nat)
<a name="line-372"></a>              (width2   :: Nat)
<a name="line-373"></a>              (height   :: Nat)
<a name="line-374"></a>              (channels :: Nat)
<a name="line-375"></a>              (depth    :: *)
<a name="line-376"></a>     . ( Mat (ShapeT [height, width]) ('S channels) ('S depth) ~ Lambda
<a name="line-377"></a>       , width2 ~ ((*) width 2) -- TODO (RvD): HSE parse error with infix type operator
<a name="line-378"></a>       )
<a name="line-379"></a>    =&gt; Mat (ShapeT [height, width2]) ('S channels) ('S depth)
<a name="line-380"></a>erodeImg = exceptError $
<a name="line-381"></a>    withMatM (Proxy :: Proxy [height, width2])
<a name="line-382"></a>             (Proxy :: Proxy channels)
<a name="line-383"></a>             (Proxy :: Proxy depth)
<a name="line-384"></a>             white $ \imgM -&gt; do
<a name="line-385"></a>      erodedLambda &lt;-
<a name="line-386"></a>        pureExcept $ erode lambda Nothing (Nothing :: Maybe Point2i) 5 BorderReplicate
<a name="line-387"></a>      matCopyToM imgM (V2 0 0) lambda Nothing
<a name="line-388"></a>      matCopyToM imgM (V2 w 0) erodedLambda Nothing
<a name="line-389"></a>  where
<a name="line-390"></a>    w = fromInteger $ natVal (Proxy :: Proxy width)
<a name="line-391"></a>@
<a name="line-392"></a>
<a name="line-393"></a>&lt;&lt;doc/generated/examples/erodeImg.png erodeImg&gt;&gt;
<a name="line-394"></a>
<a name="line-395"></a>&lt;<a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#erode">http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#erode</a> OpenCV Sphinx doc&gt;
<a name="line-396"></a>-}</span>
<a name="line-397"></a><span class='hs-definition'>erode</span>
<a name="line-398"></a>    <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span> <span class='hs-conid'>IsPoint2</span> <span class='hs-varid'>point2</span> <span class='hs-conid'>Int32</span>
<a name="line-399"></a>       <span class='hs-layout'>,</span> <span class='hs-varid'>depth</span> <span class='hs-varop'>`In`</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>Word8</span><span class='hs-layout'>,</span> <span class='hs-conid'>Word16</span><span class='hs-layout'>,</span> <span class='hs-conid'>Int16</span><span class='hs-layout'>,</span> <span class='hs-conid'>Float</span><span class='hs-layout'>,</span> <span class='hs-conid'>Double</span><span class='hs-keyglyph'>]</span>
<a name="line-400"></a>       <span class='hs-layout'>)</span>
<a name="line-401"></a>    <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-varid'>channels</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>depth</span><span class='hs-layout'>)</span> <span class='hs-comment'>-- ^ Input image.</span>
<a name="line-402"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Maybe</span> <span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-keyglyph'>[</span><span class='hs-varid'>sh</span><span class='hs-layout'>,</span> <span class='hs-varid'>sw</span><span class='hs-keyglyph'>]</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-num'>1</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-conid'>Word8</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-403"></a>       <span class='hs-comment'>-- ^ Structuring element used for erosion. If `emptyMat` is</span>
<a name="line-404"></a>       <span class='hs-comment'>-- used a @3x3@ rectangular structuring element is used. Kernel</span>
<a name="line-405"></a>       <span class='hs-comment'>-- can be created using `getStructuringElement`.</span>
<a name="line-406"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Maybe</span> <span class='hs-layout'>(</span><span class='hs-varid'>point2</span> <span class='hs-conid'>Int32</span><span class='hs-layout'>)</span> <span class='hs-comment'>-- ^ anchor</span>
<a name="line-407"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Int</span> <span class='hs-comment'>-- ^ iterations</span>
<a name="line-408"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>BorderMode</span>
<a name="line-409"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>CvExcept</span> <span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-varid'>channels</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>depth</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-410"></a><span class='hs-definition'>erode</span> <span class='hs-varid'>src</span> <span class='hs-varid'>mbKernel</span> <span class='hs-varid'>mbAnchor</span> <span class='hs-varid'>iterations</span> <span class='hs-varid'>borderMode</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>unsafeWrapException</span> <span class='hs-varop'>$</span> <span class='hs-keyword'>do</span>
<a name="line-411"></a>    <span class='hs-varid'>dst</span> <span class='hs-keyglyph'>&lt;-</span> <span class='hs-varid'>newEmptyMat</span>
<a name="line-412"></a>    <span class='hs-varid'>handleCvException</span> <span class='hs-layout'>(</span><span class='hs-varid'>pure</span> <span class='hs-varop'>$</span> <span class='hs-varid'>unsafeCoerceMat</span> <span class='hs-varid'>dst</span><span class='hs-layout'>)</span> <span class='hs-varop'>$</span>
<a name="line-413"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>src</span>    <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>srcPtr</span>    <span class='hs-keyglyph'>-&gt;</span>
<a name="line-414"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>dst</span>    <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>dstPtr</span>    <span class='hs-keyglyph'>-&gt;</span>
<a name="line-415"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>kernel</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>kernelPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-416"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>anchor</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>anchorPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-417"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>borderValue</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>borderValuePtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-418"></a>        <span class='hs-keyglyph'>[</span><span class='hs-varid'>cvExcept</span><span class='hs-keyglyph'>|</span>
<a name="line-419"></a>          <span class='hs-varid'>cv</span><span class='hs-keyglyph'>::</span><span class='hs-varid'>erode</span>
<a name="line-420"></a>          <span class='hs-layout'>(</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span>     <span class='hs-varop'>*</span> <span class='hs-varid'>srcPtr</span>        <span class='hs-layout'>)</span>
<a name="line-421"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span>     <span class='hs-varop'>*</span> <span class='hs-varid'>dstPtr</span>        <span class='hs-layout'>)</span>
<a name="line-422"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span>     <span class='hs-varop'>*</span> <span class='hs-varid'>kernelPtr</span>     <span class='hs-layout'>)</span>
<a name="line-423"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Point2i</span> <span class='hs-varop'>*</span> <span class='hs-varid'>anchorPtr</span>     <span class='hs-layout'>)</span>
<a name="line-424"></a>          <span class='hs-layout'>,</span>  <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>int32_t</span>   <span class='hs-varid'>c'iterations</span>  <span class='hs-layout'>)</span>
<a name="line-425"></a>          <span class='hs-layout'>,</span>  <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>int32_t</span>   <span class='hs-varid'>c'borderType</span>  <span class='hs-layout'>)</span>
<a name="line-426"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Scalar</span>  <span class='hs-varop'>*</span> <span class='hs-varid'>borderValuePtr</span><span class='hs-layout'>)</span>
<a name="line-427"></a>          <span class='hs-layout'>)</span><span class='hs-layout'>;</span>
<a name="line-428"></a>        <span class='hs-keyglyph'>|</span><span class='hs-keyglyph'>]</span>
<a name="line-429"></a>  <span class='hs-keyword'>where</span>
<a name="line-430"></a>    <span class='hs-varid'>kernel</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Mat</span> <span class='hs-chr'>'</span><span class='hs-conid'>D</span> <span class='hs-chr'>'</span><span class='hs-conid'>D</span> <span class='hs-chr'>'</span><span class='hs-conid'>D</span>
<a name="line-431"></a>    <span class='hs-varid'>kernel</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>maybe</span> <span class='hs-layout'>(</span><span class='hs-varid'>relaxMat</span> <span class='hs-varid'>emptyMat</span><span class='hs-layout'>)</span> <span class='hs-varid'>unsafeCoerceMat</span> <span class='hs-varid'>mbKernel</span>
<a name="line-432"></a>
<a name="line-433"></a>    <span class='hs-varid'>anchor</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Point2i</span>
<a name="line-434"></a>    <span class='hs-varid'>anchor</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>maybe</span> <span class='hs-varid'>defaultAnchor</span> <span class='hs-varid'>toPoint</span> <span class='hs-varid'>mbAnchor</span>
<a name="line-435"></a>
<a name="line-436"></a>    <span class='hs-varid'>c'iterations</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fromIntegral</span> <span class='hs-varid'>iterations</span>
<a name="line-437"></a>    <span class='hs-layout'>(</span><span class='hs-varid'>c'borderType</span><span class='hs-layout'>,</span> <span class='hs-varid'>borderValue</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>marshalBorderMode</span> <span class='hs-varid'>borderMode</span>
<a name="line-438"></a>
<a name="line-439"></a><a name="filter2D"></a><span class='hs-comment'>{- | Convolves an image with the kernel.
<a name="line-440"></a>
<a name="line-441"></a>Example:
<a name="line-442"></a>
<a name="line-443"></a>@
<a name="line-444"></a>filter2DImg
<a name="line-445"></a>    :: forall (width    :: Nat)
<a name="line-446"></a>              (width2   :: Nat)
<a name="line-447"></a>              (height   :: Nat)
<a name="line-448"></a>              (channels :: Nat)
<a name="line-449"></a>              (depth    :: *)
<a name="line-450"></a>     . ( Mat (ShapeT [height, width]) ('S channels) ('S depth) ~ Birds_512x341
<a name="line-451"></a>       , width2 ~ ((*) width 2) -- TODO (RvD): HSE parse error with infix type operator
<a name="line-452"></a>       )
<a name="line-453"></a>    =&gt; Mat (ShapeT [height, width2]) ('S channels) ('S depth)
<a name="line-454"></a>filter2DImg = exceptError $
<a name="line-455"></a>    withMatM (Proxy :: Proxy [height, width2])
<a name="line-456"></a>             (Proxy :: Proxy channels)
<a name="line-457"></a>             (Proxy :: Proxy depth)
<a name="line-458"></a>             white $ \imgM -&gt; do
<a name="line-459"></a>      filteredBird &lt;-
<a name="line-460"></a>        pureExcept $ filter2D birds_512x341 kernel (Nothing :: Maybe Point2i) 0 BorderReplicate
<a name="line-461"></a>      matCopyToM imgM (V2 0 0) birds_512x341 Nothing
<a name="line-462"></a>      matCopyToM imgM (V2 w 0) filteredBird Nothing
<a name="line-463"></a>  where
<a name="line-464"></a>    w = fromInteger $ natVal (Proxy :: Proxy width)
<a name="line-465"></a>    kernel =
<a name="line-466"></a>      exceptError $
<a name="line-467"></a>      withMatM (Proxy :: Proxy [3, 3])
<a name="line-468"></a>               (Proxy :: Proxy 1)
<a name="line-469"></a>               (Proxy :: Proxy Double)
<a name="line-470"></a>               black $ \imgM -&gt; do
<a name="line-471"></a>        lift $ line imgM (V2 0 0 :: V2 Int32) (V2 0 0 :: V2 Int32) (V4 (-2) (-2) (-2) 1 :: V4 Double) 0 LineType_8 0
<a name="line-472"></a>        lift $ line imgM (V2 1 0 :: V2 Int32) (V2 0 1 :: V2 Int32) (V4 (-1) (-1) (-1) 1 :: V4 Double) 0 LineType_8 0
<a name="line-473"></a>        lift $ line imgM (V2 1 1 :: V2 Int32) (V2 1 1 :: V2 Int32) (V4   1    1    1  1 :: V4 Double) 0 LineType_8 0
<a name="line-474"></a>        lift $ line imgM (V2 1 2 :: V2 Int32) (V2 2 1 :: V2 Int32) (V4   1    1    1  1 :: V4 Double) 0 LineType_8 0
<a name="line-475"></a>        lift $ line imgM (V2 2 2 :: V2 Int32) (V2 2 2 :: V2 Int32) (V4   2    2    2  1 :: V4 Double) 0 LineType_8 0
<a name="line-476"></a>@
<a name="line-477"></a>
<a name="line-478"></a>&lt;&lt;doc/generated/examples/filter2DImg.png filter2DImg&gt;&gt;
<a name="line-479"></a>
<a name="line-480"></a>
<a name="line-481"></a>&lt;<a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#filter2d">http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#filter2d</a> OpenCV Sphinx doc&gt;
<a name="line-482"></a>-}</span>
<a name="line-483"></a><span class='hs-definition'>filter2D</span>
<a name="line-484"></a>    <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span> <span class='hs-conid'>IsPoint2</span> <span class='hs-varid'>point2</span> <span class='hs-conid'>Int32</span>
<a name="line-485"></a>       <span class='hs-layout'>,</span> <span class='hs-varid'>depth</span> <span class='hs-varop'>`In`</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>Word8</span><span class='hs-layout'>,</span> <span class='hs-conid'>Word16</span><span class='hs-layout'>,</span> <span class='hs-conid'>Int16</span><span class='hs-layout'>,</span> <span class='hs-conid'>Float</span><span class='hs-layout'>,</span> <span class='hs-conid'>Double</span><span class='hs-keyglyph'>]</span>
<a name="line-486"></a>       <span class='hs-layout'>)</span>
<a name="line-487"></a>    <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-varid'>channels</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>depth</span><span class='hs-layout'>)</span> <span class='hs-comment'>-- ^ Input image.</span>
<a name="line-488"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Mat</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-keyglyph'>[</span><span class='hs-varid'>sh</span><span class='hs-layout'>,</span> <span class='hs-varid'>sw</span><span class='hs-keyglyph'>]</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-num'>1</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-conid'>Double</span><span class='hs-layout'>)</span>
<a name="line-489"></a>       <span class='hs-comment'>-- ^ convolution kernel (or rather a correlation kernel),</span>
<a name="line-490"></a>       <span class='hs-comment'>-- a single-channel floating point matrix; if you want to</span>
<a name="line-491"></a>       <span class='hs-comment'>-- apply different kernels to different channels, split the</span>
<a name="line-492"></a>       <span class='hs-comment'>-- image into separate color planes using split and process</span>
<a name="line-493"></a>       <span class='hs-comment'>-- them individually.</span>
<a name="line-494"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Maybe</span> <span class='hs-layout'>(</span><span class='hs-varid'>point2</span> <span class='hs-conid'>Int32</span><span class='hs-layout'>)</span> <span class='hs-comment'>-- ^ anchor</span>
<a name="line-495"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Double</span> <span class='hs-comment'>-- ^ delta</span>
<a name="line-496"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>BorderMode</span>
<a name="line-497"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>CvExcept</span> <span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-varid'>channels</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>depth</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-498"></a><span class='hs-definition'>filter2D</span> <span class='hs-varid'>src</span> <span class='hs-varid'>kernel</span> <span class='hs-varid'>mbAnchor</span> <span class='hs-varid'>delta</span> <span class='hs-varid'>borderMode</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>unsafeWrapException</span> <span class='hs-varop'>$</span> <span class='hs-keyword'>do</span>
<a name="line-499"></a>    <span class='hs-varid'>dst</span> <span class='hs-keyglyph'>&lt;-</span> <span class='hs-varid'>newEmptyMat</span>
<a name="line-500"></a>    <span class='hs-varid'>handleCvException</span> <span class='hs-layout'>(</span><span class='hs-varid'>pure</span> <span class='hs-varop'>$</span> <span class='hs-varid'>unsafeCoerceMat</span> <span class='hs-varid'>dst</span><span class='hs-layout'>)</span> <span class='hs-varop'>$</span>
<a name="line-501"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>src</span>    <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>srcPtr</span>    <span class='hs-keyglyph'>-&gt;</span>
<a name="line-502"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>dst</span>    <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>dstPtr</span>    <span class='hs-keyglyph'>-&gt;</span>
<a name="line-503"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>kernel</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>kernelPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-504"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>anchor</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>anchorPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-505"></a>        <span class='hs-keyglyph'>[</span><span class='hs-varid'>cvExcept</span><span class='hs-keyglyph'>|</span>
<a name="line-506"></a>          <span class='hs-varid'>cv</span><span class='hs-keyglyph'>::</span><span class='hs-varid'>filter2D</span>
<a name="line-507"></a>          <span class='hs-layout'>(</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span>     <span class='hs-varop'>*</span> <span class='hs-varid'>srcPtr</span>        <span class='hs-layout'>)</span>
<a name="line-508"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span>     <span class='hs-varop'>*</span> <span class='hs-varid'>dstPtr</span>        <span class='hs-layout'>)</span>
<a name="line-509"></a>          <span class='hs-layout'>,</span> <span class='hs-comment'>-</span><span class='hs-num'>1</span>
<a name="line-510"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span>     <span class='hs-varop'>*</span> <span class='hs-varid'>kernelPtr</span>     <span class='hs-layout'>)</span>
<a name="line-511"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Point2i</span> <span class='hs-varop'>*</span> <span class='hs-varid'>anchorPtr</span>     <span class='hs-layout'>)</span>
<a name="line-512"></a>          <span class='hs-layout'>,</span>  <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>double</span>    <span class='hs-varid'>c'delta</span>       <span class='hs-layout'>)</span>
<a name="line-513"></a>          <span class='hs-layout'>,</span>  <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>int32_t</span>   <span class='hs-varid'>c'borderType</span>  <span class='hs-layout'>)</span>
<a name="line-514"></a>          <span class='hs-layout'>)</span><span class='hs-layout'>;</span>
<a name="line-515"></a>        <span class='hs-keyglyph'>|</span><span class='hs-keyglyph'>]</span>
<a name="line-516"></a>  <span class='hs-keyword'>where</span>
<a name="line-517"></a>    <span class='hs-varid'>anchor</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Point2i</span>
<a name="line-518"></a>    <span class='hs-varid'>anchor</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>maybe</span> <span class='hs-varid'>defaultAnchor</span> <span class='hs-varid'>toPoint</span> <span class='hs-varid'>mbAnchor</span>
<a name="line-519"></a>
<a name="line-520"></a>    <span class='hs-varid'>c'delta</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>realToFrac</span> <span class='hs-varid'>delta</span>
<a name="line-521"></a>    <span class='hs-layout'>(</span><span class='hs-varid'>c'borderType</span><span class='hs-layout'>,</span> <span class='hs-keyword'>_</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>marshalBorderMode</span> <span class='hs-varid'>borderMode</span>
<a name="line-522"></a>
<a name="line-523"></a><a name="dilate"></a><span class='hs-comment'>{- | Dilates an image by using a specific structuring element
<a name="line-524"></a>
<a name="line-525"></a>Example:
<a name="line-526"></a>
<a name="line-527"></a>@
<a name="line-528"></a>dilateImg
<a name="line-529"></a>    :: forall (width    :: Nat)
<a name="line-530"></a>              (width2   :: Nat)
<a name="line-531"></a>              (height   :: Nat)
<a name="line-532"></a>              (channels :: Nat)
<a name="line-533"></a>              (depth    :: *)
<a name="line-534"></a>     . ( Mat (ShapeT [height, width]) ('S channels) ('S depth) ~ Lambda
<a name="line-535"></a>       , width2 ~ ((*) width 2) -- TODO (RvD): HSE parse error with infix type operator
<a name="line-536"></a>       )
<a name="line-537"></a>    =&gt; Mat (ShapeT [height, width2]) ('S channels) ('S depth)
<a name="line-538"></a>dilateImg = exceptError $
<a name="line-539"></a>    withMatM (Proxy :: Proxy [height, width2])
<a name="line-540"></a>             (Proxy :: Proxy channels)
<a name="line-541"></a>             (Proxy :: Proxy depth)
<a name="line-542"></a>             white $ \imgM -&gt; do
<a name="line-543"></a>      dilatedLambda &lt;-
<a name="line-544"></a>        pureExcept $ dilate lambda Nothing (Nothing :: Maybe Point2i) 3 BorderReplicate
<a name="line-545"></a>      matCopyToM imgM (V2 0 0) lambda Nothing
<a name="line-546"></a>      matCopyToM imgM (V2 w 0) dilatedLambda Nothing
<a name="line-547"></a>  where
<a name="line-548"></a>    w = fromInteger $ natVal (Proxy :: Proxy width)
<a name="line-549"></a>@
<a name="line-550"></a>
<a name="line-551"></a>&lt;&lt;doc/generated/examples/dilateImg.png dilateImg&gt;&gt;
<a name="line-552"></a>
<a name="line-553"></a>
<a name="line-554"></a>&lt;<a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#dilate">http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#dilate</a> OpenCV Sphinx doc&gt;
<a name="line-555"></a>-}</span>
<a name="line-556"></a><span class='hs-definition'>dilate</span>
<a name="line-557"></a>    <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span> <span class='hs-conid'>IsPoint2</span> <span class='hs-varid'>point2</span> <span class='hs-conid'>Int32</span>
<a name="line-558"></a>       <span class='hs-layout'>,</span> <span class='hs-varid'>depth</span> <span class='hs-varop'>`In`</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>Word8</span><span class='hs-layout'>,</span> <span class='hs-conid'>Word16</span><span class='hs-layout'>,</span> <span class='hs-conid'>Int16</span><span class='hs-layout'>,</span> <span class='hs-conid'>Float</span><span class='hs-layout'>,</span> <span class='hs-conid'>Double</span><span class='hs-keyglyph'>]</span>
<a name="line-559"></a>       <span class='hs-layout'>)</span>
<a name="line-560"></a>    <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-varid'>channels</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>depth</span><span class='hs-layout'>)</span> <span class='hs-comment'>-- ^ Input image.</span>
<a name="line-561"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Maybe</span> <span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-keyglyph'>[</span><span class='hs-varid'>sh</span><span class='hs-layout'>,</span> <span class='hs-varid'>sw</span><span class='hs-keyglyph'>]</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-num'>1</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-conid'>Word8</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-562"></a>       <span class='hs-comment'>-- ^ Structuring element used for dilation. If `emptyMat` is</span>
<a name="line-563"></a>       <span class='hs-comment'>-- used a @3x3@ rectangular structuring element is used. Kernel</span>
<a name="line-564"></a>       <span class='hs-comment'>-- can be created using `getStructuringElement`.</span>
<a name="line-565"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Maybe</span> <span class='hs-layout'>(</span><span class='hs-varid'>point2</span> <span class='hs-conid'>Int32</span><span class='hs-layout'>)</span> <span class='hs-comment'>-- ^ anchor</span>
<a name="line-566"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Int</span> <span class='hs-comment'>-- ^ iterations</span>
<a name="line-567"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>BorderMode</span>
<a name="line-568"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>CvExcept</span> <span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-varid'>channels</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>depth</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-569"></a><span class='hs-definition'>dilate</span> <span class='hs-varid'>src</span> <span class='hs-varid'>mbKernel</span> <span class='hs-varid'>mbAnchor</span> <span class='hs-varid'>iterations</span> <span class='hs-varid'>borderMode</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>unsafeWrapException</span> <span class='hs-varop'>$</span> <span class='hs-keyword'>do</span>
<a name="line-570"></a>    <span class='hs-varid'>dst</span> <span class='hs-keyglyph'>&lt;-</span> <span class='hs-varid'>newEmptyMat</span>
<a name="line-571"></a>    <span class='hs-varid'>handleCvException</span> <span class='hs-layout'>(</span><span class='hs-varid'>pure</span> <span class='hs-varop'>$</span> <span class='hs-varid'>unsafeCoerceMat</span> <span class='hs-varid'>dst</span><span class='hs-layout'>)</span> <span class='hs-varop'>$</span>
<a name="line-572"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>src</span>    <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>srcPtr</span>    <span class='hs-keyglyph'>-&gt;</span>
<a name="line-573"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>dst</span>    <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>dstPtr</span>    <span class='hs-keyglyph'>-&gt;</span>
<a name="line-574"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>kernel</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>kernelPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-575"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>anchor</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>anchorPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-576"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>borderValue</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>borderValuePtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-577"></a>        <span class='hs-keyglyph'>[</span><span class='hs-varid'>cvExcept</span><span class='hs-keyglyph'>|</span>
<a name="line-578"></a>          <span class='hs-varid'>cv</span><span class='hs-keyglyph'>::</span><span class='hs-varid'>dilate</span>
<a name="line-579"></a>          <span class='hs-layout'>(</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span>     <span class='hs-varop'>*</span> <span class='hs-varid'>srcPtr</span>        <span class='hs-layout'>)</span>
<a name="line-580"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span>     <span class='hs-varop'>*</span> <span class='hs-varid'>dstPtr</span>        <span class='hs-layout'>)</span>
<a name="line-581"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span>     <span class='hs-varop'>*</span> <span class='hs-varid'>kernelPtr</span>     <span class='hs-layout'>)</span>
<a name="line-582"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Point2i</span> <span class='hs-varop'>*</span> <span class='hs-varid'>anchorPtr</span>     <span class='hs-layout'>)</span>
<a name="line-583"></a>          <span class='hs-layout'>,</span>  <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>int32_t</span>   <span class='hs-varid'>c'iterations</span>  <span class='hs-layout'>)</span>
<a name="line-584"></a>          <span class='hs-layout'>,</span>  <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>int32_t</span>   <span class='hs-varid'>c'borderType</span>  <span class='hs-layout'>)</span>
<a name="line-585"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Scalar</span>  <span class='hs-varop'>*</span> <span class='hs-varid'>borderValuePtr</span><span class='hs-layout'>)</span>
<a name="line-586"></a>          <span class='hs-layout'>)</span><span class='hs-layout'>;</span>
<a name="line-587"></a>        <span class='hs-keyglyph'>|</span><span class='hs-keyglyph'>]</span>
<a name="line-588"></a>  <span class='hs-keyword'>where</span>
<a name="line-589"></a>    <span class='hs-varid'>kernel</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Mat</span> <span class='hs-chr'>'</span><span class='hs-conid'>D</span> <span class='hs-chr'>'</span><span class='hs-conid'>D</span> <span class='hs-chr'>'</span><span class='hs-conid'>D</span>
<a name="line-590"></a>    <span class='hs-varid'>kernel</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>maybe</span> <span class='hs-layout'>(</span><span class='hs-varid'>relaxMat</span> <span class='hs-varid'>emptyMat</span><span class='hs-layout'>)</span> <span class='hs-varid'>unsafeCoerceMat</span> <span class='hs-varid'>mbKernel</span>
<a name="line-591"></a>
<a name="line-592"></a>    <span class='hs-varid'>anchor</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Point2i</span>
<a name="line-593"></a>    <span class='hs-varid'>anchor</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>maybe</span> <span class='hs-varid'>defaultAnchor</span> <span class='hs-varid'>toPoint</span> <span class='hs-varid'>mbAnchor</span>
<a name="line-594"></a>
<a name="line-595"></a>    <span class='hs-varid'>c'iterations</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fromIntegral</span> <span class='hs-varid'>iterations</span>
<a name="line-596"></a>    <span class='hs-layout'>(</span><span class='hs-varid'>c'borderType</span><span class='hs-layout'>,</span> <span class='hs-varid'>borderValue</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>marshalBorderMode</span> <span class='hs-varid'>borderMode</span>
<a name="line-597"></a>
<a name="line-598"></a><a name="morphologyEx"></a><span class='hs-comment'>{- | Performs advanced morphological transformations
<a name="line-599"></a>
<a name="line-600"></a>&lt;<a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#morphologyex">http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#morphologyex</a> OpenCV Sphinx doc&gt;
<a name="line-601"></a>-}</span>
<a name="line-602"></a><span class='hs-definition'>morphologyEx</span>
<a name="line-603"></a>    <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span> <span class='hs-conid'>IsPoint2</span> <span class='hs-varid'>point2</span> <span class='hs-conid'>Int32</span>
<a name="line-604"></a>       <span class='hs-layout'>,</span> <span class='hs-varid'>depth</span> <span class='hs-varop'>`In`</span> <span class='hs-keyglyph'>[</span><span class='hs-conid'>Word8</span><span class='hs-layout'>,</span> <span class='hs-conid'>Word16</span><span class='hs-layout'>,</span> <span class='hs-conid'>Int16</span><span class='hs-layout'>,</span> <span class='hs-conid'>Float</span><span class='hs-layout'>,</span> <span class='hs-conid'>Double</span><span class='hs-keyglyph'>]</span>
<a name="line-605"></a>       <span class='hs-layout'>)</span>
<a name="line-606"></a>     <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-varid'>channels</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>depth</span><span class='hs-layout'>)</span> <span class='hs-comment'>-- ^ Source image.</span>
<a name="line-607"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>MorphOperation</span> <span class='hs-comment'>-- ^ Type of a morphological operation.</span>
<a name="line-608"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Mat</span> <span class='hs-chr'>'</span><span class='hs-conid'>D</span> <span class='hs-chr'>'</span><span class='hs-conid'>D</span> <span class='hs-chr'>'</span><span class='hs-conid'>D</span> <span class='hs-comment'>-- ^ Structuring element.</span>
<a name="line-609"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Maybe</span> <span class='hs-layout'>(</span><span class='hs-varid'>point2</span> <span class='hs-conid'>Int32</span><span class='hs-layout'>)</span> <span class='hs-comment'>-- ^ Anchor position with the kernel.</span>
<a name="line-610"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Int</span> <span class='hs-comment'>-- ^ Number of times erosion and dilation are applied.</span>
<a name="line-611"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>BorderMode</span>
<a name="line-612"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>CvExcept</span> <span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varid'>shape</span> <span class='hs-varid'>channels</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-varid'>depth</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-613"></a><span class='hs-definition'>morphologyEx</span> <span class='hs-varid'>src</span> <span class='hs-varid'>op</span> <span class='hs-varid'>kernel</span> <span class='hs-varid'>mbAnchor</span> <span class='hs-varid'>iterations</span> <span class='hs-varid'>borderMode</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>unsafeWrapException</span> <span class='hs-varop'>$</span> <span class='hs-keyword'>do</span>
<a name="line-614"></a>    <span class='hs-varid'>dst</span> <span class='hs-keyglyph'>&lt;-</span> <span class='hs-varid'>newEmptyMat</span>
<a name="line-615"></a>    <span class='hs-varid'>handleCvException</span> <span class='hs-layout'>(</span><span class='hs-varid'>pure</span> <span class='hs-varop'>$</span> <span class='hs-varid'>unsafeCoerceMat</span> <span class='hs-varid'>dst</span><span class='hs-layout'>)</span> <span class='hs-varop'>$</span>
<a name="line-616"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>src</span>    <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>srcPtr</span>    <span class='hs-keyglyph'>-&gt;</span>
<a name="line-617"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>dst</span>    <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>dstPtr</span>    <span class='hs-keyglyph'>-&gt;</span>
<a name="line-618"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>kernel</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>kernelPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-619"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>anchor</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>anchorPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-620"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>borderValue</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>borderValuePtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-621"></a>        <span class='hs-keyglyph'>[</span><span class='hs-varid'>cvExcept</span><span class='hs-keyglyph'>|</span>
<a name="line-622"></a>          <span class='hs-varid'>cv</span><span class='hs-keyglyph'>::</span><span class='hs-varid'>morphologyEx</span>
<a name="line-623"></a>          <span class='hs-layout'>(</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span>     <span class='hs-varop'>*</span> <span class='hs-varid'>srcPtr</span>        <span class='hs-layout'>)</span>
<a name="line-624"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span>     <span class='hs-varop'>*</span> <span class='hs-varid'>dstPtr</span>        <span class='hs-layout'>)</span>
<a name="line-625"></a>          <span class='hs-layout'>,</span>  <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>int32_t</span>   <span class='hs-varid'>c'op</span>          <span class='hs-layout'>)</span>
<a name="line-626"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span>     <span class='hs-varop'>*</span> <span class='hs-varid'>kernelPtr</span>     <span class='hs-layout'>)</span>
<a name="line-627"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Point2i</span> <span class='hs-varop'>*</span> <span class='hs-varid'>anchorPtr</span>     <span class='hs-layout'>)</span>
<a name="line-628"></a>          <span class='hs-layout'>,</span>  <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>int32_t</span>   <span class='hs-varid'>c'iterations</span>  <span class='hs-layout'>)</span>
<a name="line-629"></a>          <span class='hs-layout'>,</span>  <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>int32_t</span>   <span class='hs-varid'>c'borderType</span>  <span class='hs-layout'>)</span>
<a name="line-630"></a>          <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Scalar</span>  <span class='hs-varop'>*</span> <span class='hs-varid'>borderValuePtr</span><span class='hs-layout'>)</span>
<a name="line-631"></a>          <span class='hs-layout'>)</span><span class='hs-layout'>;</span>
<a name="line-632"></a>        <span class='hs-keyglyph'>|</span><span class='hs-keyglyph'>]</span>
<a name="line-633"></a>
<a name="line-634"></a>  <span class='hs-keyword'>where</span>
<a name="line-635"></a>    <span class='hs-varid'>c'op</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>marshalMorphOperation</span> <span class='hs-varid'>op</span>
<a name="line-636"></a>
<a name="line-637"></a>    <span class='hs-varid'>anchor</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Point2i</span>
<a name="line-638"></a>    <span class='hs-varid'>anchor</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>maybe</span> <span class='hs-varid'>defaultAnchor</span> <span class='hs-varid'>toPoint</span> <span class='hs-varid'>mbAnchor</span>
<a name="line-639"></a>
<a name="line-640"></a>    <span class='hs-varid'>c'iterations</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fromIntegral</span> <span class='hs-varid'>iterations</span>
<a name="line-641"></a>    <span class='hs-layout'>(</span><span class='hs-varid'>c'borderType</span><span class='hs-layout'>,</span> <span class='hs-varid'>borderValue</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>marshalBorderMode</span> <span class='hs-varid'>borderMode</span>
<a name="line-642"></a>
<a name="line-643"></a>
<a name="line-644"></a><a name="getStructuringElement"></a><span class='hs-comment'>{- | Returns a structuring element of the specified size and shape for
<a name="line-645"></a>morphological operations
<a name="line-646"></a>
<a name="line-647"></a>Example:
<a name="line-648"></a>
<a name="line-649"></a>@
<a name="line-650"></a>type StructureImg = Mat (ShapeT [128, 128]) ('S 1) ('S Word8)
<a name="line-651"></a>
<a name="line-652"></a>structureImg :: MorphShape -&gt; StructureImg
<a name="line-653"></a>structureImg shape = exceptError $ do
<a name="line-654"></a>    mat &lt;- getStructuringElement shape (Proxy :: Proxy 128) (Proxy :: Proxy 128)
<a name="line-655"></a>    img &lt;- matConvertTo (Just 255) Nothing mat
<a name="line-656"></a>    bitwiseNot img
<a name="line-657"></a>
<a name="line-658"></a>morphRectImg :: StructureImg
<a name="line-659"></a>morphRectImg = structureImg MorphRect
<a name="line-660"></a>
<a name="line-661"></a>morphEllipseImg :: StructureImg
<a name="line-662"></a>morphEllipseImg = structureImg MorphEllipse
<a name="line-663"></a>
<a name="line-664"></a>morphCrossImg :: StructureImg
<a name="line-665"></a>morphCrossImg = structureImg $ MorphCross $ toPoint (pure (-1) :: V2 Int32)
<a name="line-666"></a>@
<a name="line-667"></a>
<a name="line-668"></a>&lt;&lt;doc/generated/examples/morphRectImg.png morphRectImg&gt;&gt;
<a name="line-669"></a>&lt;&lt;doc/generated/examples/morphEllipseImg.png morphEllipseImg&gt;&gt;
<a name="line-670"></a>&lt;&lt;doc/generated/examples/morphCrossImg.png morphCrossImg&gt;&gt;
<a name="line-671"></a>
<a name="line-672"></a>&lt;<a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#getstructuringelement">http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/filtering.html#getstructuringelement</a> OpenCV Sphinx doc&gt;
<a name="line-673"></a>-}</span>
<a name="line-674"></a><span class='hs-definition'>getStructuringElement</span>
<a name="line-675"></a>    <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>ToInt32</span> <span class='hs-varid'>height</span><span class='hs-layout'>,</span> <span class='hs-conid'>ToInt32</span> <span class='hs-varid'>width</span><span class='hs-layout'>)</span>
<a name="line-676"></a>    <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>MorphShape</span> <span class='hs-comment'>-- ^</span>
<a name="line-677"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>height</span>
<a name="line-678"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>width</span>
<a name="line-679"></a>    <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>CvExcept</span> <span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-layout'>(</span><span class='hs-conid'>ShapeT</span> <span class='hs-layout'>(</span><span class='hs-varid'>height</span> <span class='hs-conop'>:::</span> <span class='hs-varid'>width</span> <span class='hs-conop'>:::</span> <span class='hs-conid'>Z</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-num'>1</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-chr'>'</span><span class='hs-conid'>S</span> <span class='hs-conid'>Word8</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-680"></a><span class='hs-definition'>getStructuringElement</span> <span class='hs-varid'>morphShape</span> <span class='hs-varid'>height</span> <span class='hs-varid'>width</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>unsafeWrapException</span> <span class='hs-varop'>$</span> <span class='hs-keyword'>do</span>
<a name="line-681"></a>    <span class='hs-varid'>element</span> <span class='hs-keyglyph'>&lt;-</span> <span class='hs-varid'>newEmptyMat</span>
<a name="line-682"></a>    <span class='hs-varid'>handleCvException</span> <span class='hs-layout'>(</span><span class='hs-varid'>pure</span> <span class='hs-varop'>$</span> <span class='hs-varid'>unsafeCoerceMat</span> <span class='hs-varid'>element</span><span class='hs-layout'>)</span> <span class='hs-varop'>$</span>
<a name="line-683"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>ksize</span>   <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>ksizePtr</span>   <span class='hs-keyglyph'>-&gt;</span>
<a name="line-684"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>anchor</span>  <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>anchorPtr</span>  <span class='hs-keyglyph'>-&gt;</span>
<a name="line-685"></a>      <span class='hs-varid'>withPtr</span> <span class='hs-varid'>element</span> <span class='hs-varop'>$</span> <span class='hs-keyglyph'>\</span><span class='hs-varid'>elementPtr</span> <span class='hs-keyglyph'>-&gt;</span>
<a name="line-686"></a>       <span class='hs-keyglyph'>[</span><span class='hs-varid'>cvExcept</span><span class='hs-keyglyph'>|</span>
<a name="line-687"></a>         <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Mat</span> <span class='hs-varop'>*</span> <span class='hs-varid'>elementPtr</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span>
<a name="line-688"></a>           <span class='hs-varid'>cv</span><span class='hs-keyglyph'>::</span><span class='hs-varid'>getStructuringElement</span>
<a name="line-689"></a>           <span class='hs-layout'>(</span> <span class='hs-varop'>$</span><span class='hs-layout'>(</span><span class='hs-varid'>int32_t</span> <span class='hs-varid'>c'morphShape</span><span class='hs-layout'>)</span>
<a name="line-690"></a>           <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Size2i</span> <span class='hs-varop'>*</span> <span class='hs-varid'>ksizePtr</span><span class='hs-layout'>)</span>
<a name="line-691"></a>           <span class='hs-layout'>,</span> <span class='hs-varop'>*$</span><span class='hs-layout'>(</span><span class='hs-conid'>Point2i</span> <span class='hs-varop'>*</span> <span class='hs-varid'>anchorPtr</span><span class='hs-layout'>)</span>
<a name="line-692"></a>           <span class='hs-layout'>)</span><span class='hs-layout'>;</span>
<a name="line-693"></a>       <span class='hs-keyglyph'>|</span><span class='hs-keyglyph'>]</span>
<a name="line-694"></a>  <span class='hs-keyword'>where</span>
<a name="line-695"></a>    <span class='hs-varid'>ksize</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Size2i</span>
<a name="line-696"></a>    <span class='hs-varid'>ksize</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>toSize</span> <span class='hs-varop'>$</span> <span class='hs-conid'>V2</span> <span class='hs-layout'>(</span><span class='hs-varid'>toInt32</span> <span class='hs-varid'>width</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-varid'>toInt32</span> <span class='hs-varid'>height</span><span class='hs-layout'>)</span>
<a name="line-697"></a>    <span class='hs-layout'>(</span><span class='hs-varid'>c'morphShape</span><span class='hs-layout'>,</span> <span class='hs-varid'>anchor</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>marshalMorphShape</span> <span class='hs-varid'>morphShape</span>
</pre></body>
</html>
