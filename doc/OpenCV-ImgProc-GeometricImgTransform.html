<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>OpenCV.ImgProc.GeometricImgTransform</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_OpenCV-ImgProc-GeometricImgTransform.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/OpenCV-ImgProc-GeometricImgTransform.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">opencv-0.0.0: Haskell binding to OpenCV-3.x</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">OpenCV.ImgProc.GeometricImgTransform</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>The functions in this section perform various geometrical transformations of 2D
images. They do not change the image content but deform the pixel grid and map
this deformed grid to the destination image. In fact, to avoid sampling
artifacts, the mapping is done in the reverse order, from destination to the
source. That is, for each pixel <code>(x,y)</code> of the destination image, the functions
compute coordinates of the corresponding &quot;donor&quot; pixel in the source image and
copy the pixel value:</p><pre>dst(x,y) = src(fx(x,y), fy(x,y))</pre><p>In case when you specify the forward mapping <code>&lt;gx,gy&gt; : src -&gt; dst</code>, the OpenCV
functions first compute the corresponding inverse mapping <code>&lt;fx,fy&gt;:dst-&gt;src</code>
and then use the above formula.</p><p>The actual implementations of the geometrical transformations, from the most
generic remap and to the simplest and the fastest resize, need to solve two main
problems with the above formula:</p><ul><li>Extrapolation of non-existing pixels.
Similarly to the filtering functions described in the previous section, for some
<code>(x,y)</code>, either one of <code>fx(x,y)</code>, or <code>fy(x,y)</code>, or both of them may fall outside
of the image. In this case, an extrapolation method needs to be used. OpenCV
provides the same selection of extrapolation methods as in the filtering
functions. In addition, it provides the method <code><a href="OpenCV-ImgProc-Types.html#v:BorderTransparent">BorderTransparent</a></code>. This means
that the corresponding pixels in the destination image will not be modified at
all.</li><li>Interpolation of pixel values.
Usually <code>fx(x,y)</code> and <code>fy(x,y)</code> are floating-point numbers. This means that
<code>&lt;fx,fy&gt;</code> can be either an affine or perspective transformation, or radial lens
distortion correction, and so on. So, a pixel value at fractional coordinates
needs to be retrieved. In the simplest case, the coordinates can be just rounded
to the nearest integer coordinates and the corresponding pixel can be used. This
is called a nearest-neighbor interpolation. However, a better result can be
achieved by using more sophisticated interpolation methods , where a polynomial
function is fit into some neighborhood of the computed pixel
<code>(fx(x,y),fy(x,y))</code>, and then the value of the polynomial at <code>(fx(x,y),fy(x,y))</code>
is taken as the interpolated pixel value. In OpenCV, you can choose between
several interpolation methods. See resize for details.</li></ul></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:ResizeAbsRel">ResizeAbsRel</a><ul class="subs"><li>= <a href="#v:ResizeAbs">ResizeAbs</a> <a href="OpenCV-Core-Types-Size.html#t:Size2i">Size2i</a></li><li>| <a href="#v:ResizeRel">ResizeRel</a> (<a href="file:///nix/store/wrkfqymihay7jlm75fjn1qhavdwq8z35-linear-1.20.5/share/doc/x86_64-linux-ghc-8.0.2/linear-1.20.5/html/Linear-V2.html#t:V2">V2</a> <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Double">Double</a>)</li></ul></li><li class="src short"><a href="#v:resize">resize</a> :: <a href="OpenCV-ImgProc-GeometricImgTransform.html#t:ResizeAbsRel">ResizeAbsRel</a> -&gt; <a href="OpenCV-ImgProc-Types.html#t:InterpolationMethod">InterpolationMethod</a> -&gt; <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[height, width]) channels depth -&gt; <a href="OpenCV-Exception.html#t:CvExcept">CvExcept</a> (<a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[<a href="OpenCV-TypeLevel.html#v:D">D</a>, <a href="OpenCV-TypeLevel.html#v:D">D</a>]) channels depth)</li><li class="src short"><a href="#v:warpAffine">warpAffine</a> :: <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[height, width]) channels depth -&gt; <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-Core-Types-Mat.html#t:ShapeT">ShapeT</a> '[2, 3]) (<a href="OpenCV-TypeLevel.html#v:S">S</a> 1) (<a href="OpenCV-TypeLevel.html#v:S">S</a> <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Double">Double</a>) -&gt; <a href="OpenCV-ImgProc-Types.html#t:InterpolationMethod">InterpolationMethod</a> -&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="OpenCV-ImgProc-Types.html#t:BorderMode">BorderMode</a> -&gt; <a href="OpenCV-Exception.html#t:CvExcept">CvExcept</a> (<a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[height, width]) channels depth)</li><li class="src short"><a href="#v:warpPerspective">warpPerspective</a> :: <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[height, width]) channels depth -&gt; <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-Core-Types-Mat.html#t:ShapeT">ShapeT</a> '[3, 3]) (<a href="OpenCV-TypeLevel.html#v:S">S</a> 1) (<a href="OpenCV-TypeLevel.html#v:S">S</a> <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Double">Double</a>) -&gt; <a href="OpenCV-ImgProc-Types.html#t:InterpolationMethod">InterpolationMethod</a> -&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="OpenCV-ImgProc-Types.html#t:BorderMode">BorderMode</a> -&gt; <a href="OpenCV-Exception.html#t:CvExcept">CvExcept</a> (<a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[height, width]) channels depth)</li><li class="src short"><a href="#v:invertAffineTransform">invertAffineTransform</a> :: <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-Core-Types-Mat.html#t:ShapeT">ShapeT</a> '[2, 3]) (<a href="OpenCV-TypeLevel.html#v:S">S</a> 1) depth -&gt; <a href="OpenCV-Exception.html#t:CvExcept">CvExcept</a> (<a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-Core-Types-Mat.html#t:ShapeT">ShapeT</a> '[2, 3]) (<a href="OpenCV-TypeLevel.html#v:S">S</a> 1) depth)</li><li class="src short"><a href="#v:getPerspectiveTransform">getPerspectiveTransform</a> :: <a href="OpenCV-Core-Types-Point.html#t:IsPoint2">IsPoint2</a> point2 <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Foreign-C-Types.html#t:CFloat">CFloat</a> =&gt; <a href="file:///nix/store/vys8qsf317rn8qwy00p80zlywb47lqwz-vector-0.11.0.0/share/doc/x86_64-linux-ghc-8.0.2/vector-0.11.0.0/html/Data-Vector.html#t:Vector">Vector</a> (point2 <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Foreign-C-Types.html#t:CFloat">CFloat</a>) -&gt; <a href="file:///nix/store/vys8qsf317rn8qwy00p80zlywb47lqwz-vector-0.11.0.0/share/doc/x86_64-linux-ghc-8.0.2/vector-0.11.0.0/html/Data-Vector.html#t:Vector">Vector</a> (point2 <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Foreign-C-Types.html#t:CFloat">CFloat</a>) -&gt; <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-Core-Types-Mat.html#t:ShapeT">ShapeT</a> '[3, 3]) (<a href="OpenCV-TypeLevel.html#v:S">S</a> 1) (<a href="OpenCV-TypeLevel.html#v:S">S</a> <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Double">Double</a>)</li><li class="src short"><a href="#v:getRotationMatrix2D">getRotationMatrix2D</a> :: <a href="OpenCV-Core-Types-Point.html#t:IsPoint2">IsPoint2</a> point2 <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Foreign-C-Types.html#t:CFloat">CFloat</a> =&gt; point2 <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Foreign-C-Types.html#t:CFloat">CFloat</a> -&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Double">Double</a> -&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Double">Double</a> -&gt; <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-Core-Types-Mat.html#t:ShapeT">ShapeT</a> '[2, 3]) (<a href="OpenCV-TypeLevel.html#v:S">S</a> 1) (<a href="OpenCV-TypeLevel.html#v:S">S</a> <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Double">Double</a>)</li><li class="src short"><a href="#v:remap">remap</a> :: <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[inputHeight, inputWidth]) inputChannels inputDepth -&gt; <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[outputHeight, outputWidth]) (<a href="OpenCV-TypeLevel.html#v:S">S</a> 2) (<a href="OpenCV-TypeLevel.html#v:S">S</a> <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Float">Float</a>) -&gt; <a href="OpenCV-ImgProc-Types.html#t:InterpolationMethod">InterpolationMethod</a> -&gt; <a href="OpenCV-ImgProc-Types.html#t:BorderMode">BorderMode</a> -&gt; <a href="OpenCV-Exception.html#t:CvExcept">CvExcept</a> (<a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[outputHeight, outputWidth]) inputChannels inputDepth)</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ResizeAbsRel" class="def">ResizeAbsRel</a> <a href="src/OpenCV-ImgProc-GeometricImgTransform.html#ResizeAbsRel" class="link">Source</a> <a href="#t:ResizeAbsRel" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ResizeAbs" class="def">ResizeAbs</a> <a href="OpenCV-Core-Types-Size.html#t:Size2i">Size2i</a></td><td class="doc"><p>Resize to an absolute size.</p></td></tr><tr><td class="src"><a id="v:ResizeRel" class="def">ResizeRel</a> (<a href="file:///nix/store/wrkfqymihay7jlm75fjn1qhavdwq8z35-linear-1.20.5/share/doc/x86_64-linux-ghc-8.0.2/linear-1.20.5/html/Linear-V2.html#t:V2">V2</a> <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Double">Double</a>)</td><td class="doc"><p>Resize with relative factors for both the width and the height.</p></td></tr></table></div><div class="subs instances"><p id="control.i:ResizeAbsRel" class="caption collapser" onclick="toggleSection('i:ResizeAbsRel')">Instances</p><div id="section.i:ResizeAbsRel" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ResizeAbsRel:Show:1" class="instance expander" onclick="toggleSection('i:id:ResizeAbsRel:Show:1')"></span> <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Text-Show.html#t:Show">Show</a> <a href="OpenCV-ImgProc-GeometricImgTransform.html#t:ResizeAbsRel">ResizeAbsRel</a></span> <a href="src/OpenCV-ImgProc-GeometricImgTransform.html#line-96" class="link">Source</a> <a href="#t:ResizeAbsRel" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ResizeAbsRel:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="OpenCV-ImgProc-GeometricImgTransform.html#t:ResizeAbsRel">ResizeAbsRel</a> -&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="OpenCV-ImgProc-GeometricImgTransform.html#t:ResizeAbsRel">ResizeAbsRel</a> -&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="OpenCV-ImgProc-GeometricImgTransform.html#t:ResizeAbsRel">ResizeAbsRel</a>] -&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:resize" class="def">resize</a> :: <a href="OpenCV-ImgProc-GeometricImgTransform.html#t:ResizeAbsRel">ResizeAbsRel</a> -&gt; <a href="OpenCV-ImgProc-Types.html#t:InterpolationMethod">InterpolationMethod</a> -&gt; <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[height, width]) channels depth -&gt; <a href="OpenCV-Exception.html#t:CvExcept">CvExcept</a> (<a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[<a href="OpenCV-TypeLevel.html#v:D">D</a>, <a href="OpenCV-TypeLevel.html#v:D">D</a>]) channels depth) <a href="src/OpenCV-ImgProc-GeometricImgTransform.html#resize" class="link">Source</a> <a href="#v:resize" class="selflink">#</a></p><div class="doc"><p>Resizes an image</p><p>To shrink an image, it will generally look best with <code><a href="OpenCV-ImgProc-Types.html#v:InterArea">InterArea</a></code> interpolation,
whereas to enlarge an image, it will generally look best with <code><a href="OpenCV-ImgProc-Types.html#v:InterCubic">InterCubic</a></code>
(slow) or <code><a href="OpenCV-ImgProc-Types.html#v:InterLinear">InterLinear</a></code> (faster but still looks OK).</p><p>Example:</p><pre>resizeInterAreaImg :: Mat ('S ['D, 'D]) ('S 3) ('S Word8)
resizeInterAreaImg = exceptError $
    withMatM (h ::: w + (w `div` 2) ::: Z)
             (Proxy :: Proxy 3)
             (Proxy :: Proxy Word8)
             transparent $ imgM -&gt; do
      birds_resized &lt;-
        pureExcept $ resize (ResizeRel $ pure 0.5) InterArea birds_768x512
      matCopyToM imgM (V2 0 0) birds_768x512 Nothing
      matCopyToM imgM (V2 w 0) birds_resized Nothing
      lift $ arrowedLine imgM (V2 startX y) (V2 pointX y) red 4 LineType_8 0 0.15
  where
    [h, w] = miShape $ matInfo birds_768x512
    startX = round $ fromIntegral w * (0.95 :: Double)
    pointX = round $ fromIntegral w * (1.05 :: Double)
    y = h `div` 4
</pre><p><img src="doc/generated/examples/resizeInterAreaImg.png" title="resizeInterAreaImg" /></p><p><a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/geometric_transformations.html#resize">OpenCV Sphinx doc</a></p></div></div><div class="top"><p class="src"><a id="v:warpAffine" class="def">warpAffine</a> <a href="src/OpenCV-ImgProc-GeometricImgTransform.html#warpAffine" class="link">Source</a> <a href="#v:warpAffine" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[height, width]) channels depth</td><td class="doc"><p>Source image.</p></td></tr><tr><td class="src">-&gt; <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-Core-Types-Mat.html#t:ShapeT">ShapeT</a> '[2, 3]) (<a href="OpenCV-TypeLevel.html#v:S">S</a> 1) (<a href="OpenCV-TypeLevel.html#v:S">S</a> <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Double">Double</a>)</td><td class="doc"><p>Affine transformation matrix.</p></td></tr><tr><td class="src">-&gt; <a href="OpenCV-ImgProc-Types.html#t:InterpolationMethod">InterpolationMethod</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Perform the inverse transformation.</p></td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Fill outliers.</p></td></tr><tr><td class="src">-&gt; <a href="OpenCV-ImgProc-Types.html#t:BorderMode">BorderMode</a></td><td class="doc"><p>Pixel extrapolation method.</p></td></tr><tr><td class="src">-&gt; <a href="OpenCV-Exception.html#t:CvExcept">CvExcept</a> (<a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[height, width]) channels depth)</td><td class="doc"><p>Transformed source image.</p></td></tr></table></div><div class="doc"><p>Applies an affine transformation to an image</p><p>Example:</p><pre>rotateBirds :: Mat (ShapeT [2, 3]) ('S 1) ('S Double)
rotateBirds = getRotationMatrix2D (V2 256 170 :: V2 CFloat) 45 0.75

warpAffineImg :: Birds_512x341
warpAffineImg = exceptError $
    warpAffine birds_512x341 rotateBirds InterArea False False (BorderConstant black)

warpAffineInvImg :: Birds_512x341
warpAffineInvImg = exceptError $
    warpAffine warpAffineImg rotateBirds InterCubic True False (BorderConstant black)
</pre><p><img src="doc/generated/birds_512x341.png" title="original" />
<img src="doc/generated/examples/warpAffineImg.png" title="warpAffineImg" />
<img src="doc/generated/examples/warpAffineInvImg.png" title="warpAffineInvImg" /></p><p><a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/geometric_transformations.html#warpaffine">OpenCV Sphinx doc</a></p></div></div><div class="top"><p class="src"><a id="v:warpPerspective" class="def">warpPerspective</a> <a href="src/OpenCV-ImgProc-GeometricImgTransform.html#warpPerspective" class="link">Source</a> <a href="#v:warpPerspective" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[height, width]) channels depth</td><td class="doc"><p>Source image.</p></td></tr><tr><td class="src">-&gt; <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-Core-Types-Mat.html#t:ShapeT">ShapeT</a> '[3, 3]) (<a href="OpenCV-TypeLevel.html#v:S">S</a> 1) (<a href="OpenCV-TypeLevel.html#v:S">S</a> <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Double">Double</a>)</td><td class="doc"><p>Perspective transformation matrix.</p></td></tr><tr><td class="src">-&gt; <a href="OpenCV-ImgProc-Types.html#t:InterpolationMethod">InterpolationMethod</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Perform the inverse transformation.</p></td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Fill outliers.</p></td></tr><tr><td class="src">-&gt; <a href="OpenCV-ImgProc-Types.html#t:BorderMode">BorderMode</a></td><td class="doc"><p>Pixel extrapolation method.</p></td></tr><tr><td class="src">-&gt; <a href="OpenCV-Exception.html#t:CvExcept">CvExcept</a> (<a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[height, width]) channels depth)</td><td class="doc"><p>Transformed source image.</p></td></tr></table></div><div class="doc"><p>Applies a perspective transformation to an image</p><p><a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/geometric_transformations.html#warpperspective">OpenCV Sphinx doc</a></p></div></div><div class="top"><p class="src"><a id="v:invertAffineTransform" class="def">invertAffineTransform</a> <a href="src/OpenCV-ImgProc-GeometricImgTransform.html#invertAffineTransform" class="link">Source</a> <a href="#v:invertAffineTransform" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-Core-Types-Mat.html#t:ShapeT">ShapeT</a> '[2, 3]) (<a href="OpenCV-TypeLevel.html#v:S">S</a> 1) depth</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="OpenCV-Exception.html#t:CvExcept">CvExcept</a> (<a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-Core-Types-Mat.html#t:ShapeT">ShapeT</a> '[2, 3]) (<a href="OpenCV-TypeLevel.html#v:S">S</a> 1) depth)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Inverts an affine transformation</p><p><a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/geometric_transformations.html#invertaffinetransform">OpenCV Sphinx doc</a></p></div></div><div class="top"><p class="src"><a id="v:getPerspectiveTransform" class="def">getPerspectiveTransform</a> <a href="src/OpenCV-ImgProc-GeometricImgTransform.html#getPerspectiveTransform" class="link">Source</a> <a href="#v:getPerspectiveTransform" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="OpenCV-Core-Types-Point.html#t:IsPoint2">IsPoint2</a> point2 <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Foreign-C-Types.html#t:CFloat">CFloat</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///nix/store/vys8qsf317rn8qwy00p80zlywb47lqwz-vector-0.11.0.0/share/doc/x86_64-linux-ghc-8.0.2/vector-0.11.0.0/html/Data-Vector.html#t:Vector">Vector</a> (point2 <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Foreign-C-Types.html#t:CFloat">CFloat</a>)</td><td class="doc"><p>Array of 4 floating-point Points representing 4 vertices in source image</p></td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/vys8qsf317rn8qwy00p80zlywb47lqwz-vector-0.11.0.0/share/doc/x86_64-linux-ghc-8.0.2/vector-0.11.0.0/html/Data-Vector.html#t:Vector">Vector</a> (point2 <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Foreign-C-Types.html#t:CFloat">CFloat</a>)</td><td class="doc"><p>Array of 4 floating-point Points representing 4 vertices in destination image</p></td></tr><tr><td class="src">-&gt; <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-Core-Types-Mat.html#t:ShapeT">ShapeT</a> '[3, 3]) (<a href="OpenCV-TypeLevel.html#v:S">S</a> 1) (<a href="OpenCV-TypeLevel.html#v:S">S</a> <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Double">Double</a>)</td><td class="doc"><p>The output perspective transformation, 3x3 floating-point-matrix.</p></td></tr></table></div><div class="doc"><p>Calculates a perspective transformation matrix for 2D perspective transform</p><p><a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/geometric_transformations.html#getperspectivetransform">OpenCV Sphinx doc</a></p></div></div><div class="top"><p class="src"><a id="v:getRotationMatrix2D" class="def">getRotationMatrix2D</a> <a href="src/OpenCV-ImgProc-GeometricImgTransform.html#getRotationMatrix2D" class="link">Source</a> <a href="#v:getRotationMatrix2D" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="OpenCV-Core-Types-Point.html#t:IsPoint2">IsPoint2</a> point2 <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Foreign-C-Types.html#t:CFloat">CFloat</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; point2 <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Foreign-C-Types.html#t:CFloat">CFloat</a></td><td class="doc"><p>Center of the rotation in the source image.</p></td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Double">Double</a></td><td class="doc"><p>Rotation angle in degrees. Positive values mean counter-clockwise
 rotation (the coordinate origin is assumed to be the top-left corner).</p></td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Double">Double</a></td><td class="doc"><p>Isotropic scale factor.</p></td></tr><tr><td class="src">-&gt; <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-Core-Types-Mat.html#t:ShapeT">ShapeT</a> '[2, 3]) (<a href="OpenCV-TypeLevel.html#v:S">S</a> 1) (<a href="OpenCV-TypeLevel.html#v:S">S</a> <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Double">Double</a>)</td><td class="doc"><p>The output affine transformation, 2x3 floating-point matrix.</p></td></tr></table></div><div class="doc"><p>Calculates an affine matrix of 2D rotation</p><p><a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/geometric_transformations.html#getrotationmatrix2d">OpenCV Sphinx doc</a></p></div></div><div class="top"><p class="src"><a id="v:remap" class="def">remap</a> <a href="src/OpenCV-ImgProc-GeometricImgTransform.html#remap" class="link">Source</a> <a href="#v:remap" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[inputHeight, inputWidth]) inputChannels inputDepth</td><td class="doc"><p>Source image.</p></td></tr><tr><td class="src">-&gt; <a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[outputHeight, outputWidth]) (<a href="OpenCV-TypeLevel.html#v:S">S</a> 2) (<a href="OpenCV-TypeLevel.html#v:S">S</a> <a href="file:///nix/store/p1g2bd8sisj91l0i63i2mv52ng77bgks-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Prelude.html#t:Float">Float</a>)</td><td class="doc"><p>A map of <code>(x, y)</code> points.</p></td></tr><tr><td class="src">-&gt; <a href="OpenCV-ImgProc-Types.html#t:InterpolationMethod">InterpolationMethod</a></td><td class="doc"><p>Interpolation method to use. Note that <code><a href="OpenCV-ImgProc-Types.html#v:InterArea">InterArea</a></code> is not
 supported by this function.</p></td></tr><tr><td class="src">-&gt; <a href="OpenCV-ImgProc-Types.html#t:BorderMode">BorderMode</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="OpenCV-Exception.html#t:CvExcept">CvExcept</a> (<a href="OpenCV-Core-Types-Mat.html#t:Mat">Mat</a> (<a href="OpenCV-TypeLevel.html#v:S">S</a> '[outputHeight, outputWidth]) inputChannels inputDepth)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Applies a generic geometrical transformation to an image.</p><p>The function remap transforms the source image using the specified map:</p><pre>dst(x,y) = src(map(x,y))</pre><p>Example:</p><pre>remapImg
  :: forall (width    :: Nat)
            (height   :: Nat)
            (channels :: Nat)
            (depth    :: *  )
   . (Mat ('S ['S height, 'S width]) ('S channels) ('S depth) ~ Birds_512x341)
  =&gt; Mat ('S ['S height, 'S width]) ('S channels) ('S depth)
remapImg = exceptError $ remap birds_512x341 transform InterLinear (BorderConstant black)
  where
    transform = exceptError $
                matFromFunc (Proxy :: Proxy [height, width])
                            (Proxy :: Proxy 2)
                            (Proxy :: Proxy Float)
                            exampleFunc

    exampleFunc [_y,  x] 0 = wobble x w
    exampleFunc [ y, _x] 1 = wobble y h
    exampleFunc _pos _channel = error &quot;impossible&quot;

    wobble :: Int -&gt; Float -&gt; Float
    wobble v s = let v' = fromIntegral v
                     n = v' / s
                 in v' + (s * 0.05 * sin (n * 2 * pi * 5))

    w = fromInteger $ natVal (Proxy :: Proxy width)
    h = fromInteger $ natVal (Proxy :: Proxy height)
</pre><p><img src="doc/generated/birds_512x341.png" title="original" />
<img src="doc/generated/examples/remapImg.png" title="remapImg" /></p><p><a href="http://docs.opencv.org/3.0-last-rst/modules/imgproc/doc/geometric_transformations.html#remap">OpenCV documentation</a></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>